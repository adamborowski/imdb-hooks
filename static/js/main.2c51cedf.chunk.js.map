{"version":3,"sources":["common/misc/withFading.tsx","common/misc/hooks.tsx","common/misc/getSelectedPaths.tsx","common/components/antd/__stories__/AppSider.logo.png","features/movie-browser/components/header/emptyAvatar.png","features/people-browser/components/header/emptyAvatar.png","common/misc/index.ts","common/components/FlatteningSwitch.js","common/components/antd/ContentLayout.tsx","common/components/antd/layout.tsx","common/components/antd/DefaultPrimaryContent.styled.ts","common/components/antd/DefaultPrimaryContent.tsx","common/components/antd/DefaultSecondaryContent.tsx","common/components/antd/withStyledScrollbar.tsx","common/components/antd/AppSider.tsx","common/components/antd/App.tsx","common/components/antd/AppMenu.tsx","common/components/antd/withAppMenuRouted.tsx","common/components/antd/AppTabs.tsx","common/components/antd/DefaultAppLogo.tsx","common/components/antd/app-theme.tsx","common/components/antd/DefaultAppHeader.tsx","features/core/routing.ts","features/movie-browser/routing.ts","common/components/antd/Search.styled.ts","common/components/antd/Search.tsx","common/api.ts","features/movie-browser/services/movie-search.ts","features/movie-browser/state/selectors.ts","common/aspects/list/epics.ts","common/utils.ts","common/aspects/list/hooks/usePaginatedList.tsx","common/hooks/useHistoryPush.tsx","common/hooks/hooks.tsx","common/aspects/list/index.tsx","common/aspects/list/hooks.tsx","common/aspects/list/actions.ts","common/aspects/list/reducers.tsx","common/aspects/list/hooks/useYearInput.tsx","common/aspects/list/hooks/useListData.ts","common/aspects/typeahead/hooks/useSearchOptions.tsx","common/aspects/typeahead/index.ts","common/aspects/typeahead/actions.ts","common/aspects/typeahead/reducers.ts","common/aspects/typeahead/epics.ts","common/aspects/typeahead/hooks/useSearchInput.ts","features/movie-browser/components/header/SearchOptionContent.tsx","common/aspects/details/index.tsx","common/aspects/details/actions.ts","common/aspects/details/epics.ts","common/aspects/details/reducers.ts","common/aspects/details/hooks/useDetails.ts","common/aspects/details/components/DetailsFetcher.ts","features/movie-browser/aspects.tsx","features/movie-browser/components/header/Search.tsx","features/movie-browser/state/epics.tsx","features/movie-browser/state/reducers.ts","common/workarounds.tsx","common/components/InlineSpinner.tsx","common/components/antd/BreadcrumbItem.tsx","features/movie-browser/components/breadcrumbs/List.tsx","common/components/breadcrumbs/Home.tsx","features/movie-browser/components/breadcrumbs/View.tsx","common/layout-props.tsx","common/components/CountryTags.tsx","features/movie-browser/components/pages/view/MovieViewPure.tsx","features/movie-browser/components/pages/view/index.tsx","common/getOptional.ts","common/components/VirtualList.tsx","common/components/antd/ListItem.tsx","common/withLink.tsx","common/components/antd/DefaultListItem.tsx","features/movie-browser/components/pages/list/ListItem.tsx","features/movie-browser/components/pages/list/MovieList.tsx","features/movie-browser/components/pages/list/Title.tsx","features/movie-browser/components/pages/list/YearInput.tsx","features/movie-browser/components/pages/list/Toolbar.tsx","features/movie-browser/index.tsx","features/movie-browser/components/pages/list/index.tsx","features/people-browser/routing.ts","features/people-browser/services/people-search.ts","features/people-browser/state/selectors.ts","features/people-browser/components/header/SearchOptionContent.tsx","features/people-browser/aspects.tsx","features/people-browser/components/header/Search.tsx","features/people-browser/state/epics.tsx","features/people-browser/state/reducers.ts","features/people-browser/components/breadcrumbs/List.tsx","features/people-browser/components/breadcrumbs/View.tsx","features/people-browser/components/pages/view/PersonViewPure.tsx","features/people-browser/components/pages/view/Bio.tsx","features/people-browser/components/pages/view/Movies.tsx","features/people-browser/components/pages/view/index.tsx","features/people-browser/components/pages/list/ListItem.tsx","features/people-browser/components/pages/list/PersonList.tsx","features/people-browser/components/pages/list/Title.tsx","features/people-browser/index.tsx","features/people-browser/components/pages/list/index.tsx","features/index.ts","features/core/index.tsx","App.tsx","serviceWorker.ts","Root.tsx","index.tsx","store.ts"],"names":["FADED_CLASS_NAME_ACTIVE","FADED_CLASS_NAME","withFading","passLoadingProp","arguments","length","undefined","Component","_class","_temp","WithFading","_React$Component","props","_this","Object","C_Users_Dom_src_codete_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","this","C_Users_Dom_src_codete_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__","C_Users_Dom_src_codete_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__","call","state","childrenProps","C_Users_Dom_src_codete_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__","C_Users_Dom_src_codete_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__","key","value","_ref","rest","loading","C_Users_Dom_src_codete_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__","_ref2","className","react__WEBPACK_IMPORTED_MODULE_9___default","a","createElement","assign","classnames","C_Users_Dom_src_codete_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__","React","getDerivedStateFromProps","nextProps","prevState","styled","_templateObject","useRouter","useContext","RouterContext","useQueryParams","router","useMemo","parse","location","search","useRouteParams","match","params","useSetQueryParams","history","push","C_Users_Dom_src_codete_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","getLocationDescriptionObject","stringify","_","omitBy","isNil","to","pathname","getSelectedPaths","menuItems","keyPrefix","map","m","link","matchPath","pick","childrenMatches","children","result","apply","C_Users_Dom_src_codete_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","reduce","acc","paths","concat","module","exports","_withFading__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","d","__webpack_exports__","_hooks__WEBPACK_IMPORTED_MODULE_1__","_getSelectedPaths__WEBPACK_IMPORTED_MODULE_2__","FragmentSupportingSwitch","flattenedChildren","flatten","target","Children","forEach","child","isValidElement","type","Fragment","toConsumableArray","Switch","secondaryContent","primaryContent","objectWithoutProperties","react_default","c","VBox","div","layout_templateObject","HBox","_templateObject2","Spacer","_templateObject3","withStyled","breadcrumbs","tools","title","content","tabs","DefaultPrimaryContent_styled_templateObject","p","theme","layout","main","margin","DefaultSecondaryContent_templateObject","defaultThemes","light","thumb","dark","withSublimeScrollbar","actual","withStyledScrollbar_templateObject","Sider","Layout","Scroll","react","logo","trigger","collapsible","width","breakpoint","AppSider_templateObject","sider","header","drawer","modals","id","App_templateObject","AppSider","withAntdFix","InnerComponent","menuConfiguration","renderer","menuNodes","createMenuNodes","label","icon","menu","SubMenu","Item","react_router_dom","path","selectedNodes","filter","s","mode","selectedKeys","withRoutedTabs","route","onMenuSelect","es_tabs","TabPane","tab","activeKey","onChange","activeMenuItem","find","RoutedTabs","Tabs","src","DefaultAppLogo_templateObject","baseTheme","palette","primaryColor","DefaultAppHeader_templateObject","toRootPage","process","toMovieListPage","toMovieViewPage","chars","split","keys","x","focusKeys","Complete","classCallCheck","possibleConstructorReturn","getPrototypeOf","ref","handleKeyEvent","char","e","current","focus","preventDefault","createRef","_this$props","onSearch","onSelect","searchPrompt","react_keyboard_event_handler_default","handleKeys","onKeyEvent","handleFocusableElements","auto_complete","tabIndex","dropdownClassName","dropdownMatchSelectWidth","dropdownStyle","size","style","placeholder","optionLabelProp","input","defaultProps","memo","attrs","suppressClassNameWarning","Search_styled_templateObject","getApiUrl","objectSpread","api_key","getThumbUrl","getPosterUrl","yearMatcher","getReleaseYear","shiftPageNumber","response","page","findMovies","query","year","ajax","toString","primary_release_year","pipe","findPopularMovies","selectMovieBrowser","movieBrowser","createEpics","actions","findService","popularService","selectList","requestAllPages","pages","ensureAction","merge","requestAction","payload","getFetchPageAction","pageResponse","catchError","err","of","pageError","error","action$","state$","pagesToLoad$","pageRangeEnsure","debounce","timer","mergeMap","data","items","pagesToLoad","range","startPage","stopPage","item","selectPageNeedsToBeLoaded$","pageRequest","race","skip","take","pageCancel","reset","optional","currentValue","defaultValue","selectPageOfRow","Math","floor","getDescriptor","currentQueryParams","queryParams","locationDescription","isEmpty","useHistoryPush","withQueryLink","QueryLink","Link","createUseSearchValue","queryParamName","createUseGoToSearch","pushHistory","defineProperty","createListAspect","actionCreatorFactory","searchParam","yearParam","listRoute","createActions","reducer","mapPageOntoList","results","pageSize","newState","offset","movie","index","combineReducers","action","tmpState","Array","fill","localIndex","total","total_results","createReducers","epics","useYear","parseInt","useSetYear","setQP","createUseSetYear","useSearchValue","useGoToSearch","useYearInput","setYear","searchValue","_useState","useState","_useState2","slicedToArray","setValue","displayedValue","useEffect","useDebounce","newYearValue","isNaN","Date","getFullYear","enabled","createUseYearInput","usePaginatedList","_useMappedState","useMappedState","_total","dispatch","useDispatch","start","stop","bounds","setBounds","onItemsRendered","useCallback","visibleStartIndex","visibleStopIndex","_map","max","min","_map2","firstPageToLoad","lastPageToLoad","createUsePaginatedList","useListData","createUseListData","OptGroup","Select","Option","createUseSearchOptions","renderOptionContent","subject","selectState","options","searchOption","actualValue","float","getSearchForSubjectOption","bestMatches","elements","slice","opacity","getBestMatchesOptions","compact","createTypeAheadAspect","itemRenderer","selectMovieTypeAhead","searchParamName","toViewPage","typeOccured","typeResponse","total_pages","isType","typeAction","responseAction","takeUntil","useSearchOptions","useSearchInput","defaultSearchValue","setSearchValue","displayedSearchValue","goToMovieSearch","historyPush","dataSource","onApply","cancel","createUseSearchInput","avatar","name","rank","emptyAvatar","alt","toFixed","SearchOptionContent_templateObject","createDetailsAspect","getService","stateSelector","useDetailsId","fetch","fetchComplete","fetchError","fetchAction","reducers","useDetails","createUseDetails","DetailsFetcher","detailsId","createDetailsFetcher","factory","listAspect","list","typeAheadAspect","header_SearchOptionContent","vote_average","poster_path","release_date","typeAhead","detailsAspect","details","Search","_typeAheadAspect$useS","antd_Search","onDropdownVisibleChange","opened","notFoundContent","state_epics","fixBreadcrumb","component","__ANT_BREADCRUMB_ITEM","InlineSpinner","spin","position","display","BreadcrumbItem","breadcrumb","InlineSpinner_InlineSpinner","marginRight","Home","_detailsAspect$useDet","movieId","formItemLayout","labelCol","span","wrapperCol","CountryTags","countries","tag","color","Text","Typography","entity","get","field","es_form","labelAlign","typography","CountryTags_CountryTags","rate","allowHalf","count","disabled","MovieViewPure_templateObject","MovieView","view_MovieViewPure","Toolbar","homepage","tooltip","href","es_button","MovieTitle","_detailsAspect$useDet3","original_title","fontWeight","getOptional","object","transform","FixedSizeListWithScrollbar","withStyledScrollbar","FixedSizeList","EnhancedVirtualList","withContentRect","contentRect","measureRef","row","itemSize","itemCount","itemData","padding","measure","overscanCount","height","VirtualList_templateObject","getVirtualList","ListItem","List","ListItem_templateObject","ListItemLink","inherits","createClass","innerRef","replace","react_router","Consumer","context","onClick","event","handleClick","defaultPrevented","button","metaKey","altKey","ctrlKey","shiftKey","isModifiedEvent","DefaultListItem","description","tags","popularity","Meta","es_avatar","shape","DefaultListItem_templateObject","antd_DefaultListItem","fontSize","vote_count","MovieList","_listAspect$usePagina","MovieList_List","Title","_listAspect$useListDa","YearInput","_listAspect$useYearIn","input_number","YearInput_YearInput","movie_browser","routes","exact","render","antd_ContentLayout","antd_DefaultPrimaryContent","Title_Title","breadcrumbs_List","Toolbar_Toolbar","DefaultSecondaryContent","MovieList_MovieList","view_MovieTitle","View","view_MovieView","view_Toolbar","header_Search","toPersonListPage","toPersonViewPage","usePersonId","toPersonMovies","findPeople","findPopularPeople","selectPeopleBrowser","peopleBrowser","header_SearchOptionContent_templateObject","components_header_SearchOptionContent","profile_path","append_to_response","people_browser_state_epics","personId","PersonViewPure_Text","PersonViewPure_templateObject","Bio","biography","card","IconText","text","Movies","movies","movie_credits","cast","crew","itemLayout","renderItem","Movies_IconText","extra","backdrop_path","department","job","join","overview","view_PersonViewPure","known_for_department","also_known_as","ConnectedTabs","String","TabContent","PersonList","PersonList_List","people_browser","list_Title_Title","components_breadcrumbs_List","PersonList_PersonList","aspects_detailsAspect","pages_view_MovieTitle","breadcrumbs_View","pages_view_MovieView","pages_view_Toolbar","view_ConnectedTabs","view_TabContent","components_header_Search","features","App","antd_App","antd_AppSider","antd_AppMenu","antd_DefaultAppLogo","DefaultAppHeader","plugin","cloneElement","Boolean","window","hostname","Root","store","basename","styled_components_browser_esm","index_es","Provider","preloadedState","epicMiddleware","createEpicMiddleware","middlewares","enhancers","applyMiddleware","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","pluginArray","pluginReducers","finalReducers","rootReducerFactory","run","combineEpics","ReactDOM","src_Root","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.2c51cedf.chunk.js","sourcesContent":["import classnames from 'classnames';\nimport React, { ComponentType } from 'react';\nimport styled from 'styled-components';\n\nconst FADED_CLASS_NAME_ACTIVE = 'fading-active';\nconst FADED_CLASS_NAME = 'fading';\n\ninterface IInjectProps {\n  className?: string;\n}\n\ninterface IEnhanceProps {\n  loading: boolean;\n}\n\ninterface IState {\n  childrenProps: any;\n}\n\nexport default function withFading<X>(passLoadingProp: boolean = false) {\n  return (Component: ComponentType<X & IInjectProps>) => {\n    const WithFading: ComponentType<\n      X & IEnhanceProps & IInjectProps\n    > = class extends React.Component<\n      X & IEnhanceProps & IInjectProps,\n      IState\n    > {\n      constructor(props: X & IEnhanceProps) {\n        super(props);\n\n        this.state = {\n          childrenProps: props\n        };\n      }\n\n      public static getDerivedStateFromProps = (\n        nextProps: Readonly<X & IEnhanceProps>,\n        prevState: IState\n      ) => ({\n        childrenProps: nextProps.loading ? prevState.childrenProps : nextProps\n      });\n\n      render() {\n        const { loading, ...rest } = this.state.childrenProps as IEnhanceProps;\n        const props = passLoadingProp ? this.state.childrenProps : rest;\n\n        {\n          const { className, ...rest } = props as IInjectProps;\n\n          return (\n            <Component\n              {...rest as X & IEnhanceProps}\n              className={classnames(className, FADED_CLASS_NAME, {\n                [FADED_CLASS_NAME_ACTIVE]: this.props.loading\n              })}\n            />\n          );\n        }\n      }\n    };\n\n    return styled(WithFading)`\n      &.fading-active {\n        opacity: 0.2 !important;\n        transition: opacity 500ms !important;\n        pointer-events: none;\n      }\n\n      &.fading {\n        transition: opacity 500ms !important;\n      }\n    `;\n  };\n}\n//todo do withFading only using HOOKS\n","import {\n  // @ts-ignore\n  __RouterContext as RouterContext,\n  RouteComponentProps\n} from 'react-router-dom';\nimport { useContext, useMemo } from 'react';\n// @ts-ignore\nimport { parse, stringify } from 'querystringify';\nimport _ from 'lodash';\nimport { History, LocationDescriptorObject } from 'history';\n\nexport const useRouter = (): RouteComponentProps => useContext(RouterContext);\n\ntype QueryParams = { [key: string]: string };\n\nexport const useQueryParams = (): QueryParams => {\n  const router = useRouter();\n  return useMemo(() => parse(router.location.search) as QueryParams, [\n    router.location.search\n  ]);\n};\n\nexport const useRouteParams = () =>\n  useRouter().match.params as { [key: string]: string };\n\nexport const useSetQueryParams = () => {\n  const history = useRouter().history;\n\n  return (params: { [key: string]: string | undefined }) => {\n    history.push({\n      ...getLocationDescriptionObject(history.location),\n      search: stringify(\n        _.omitBy({ ...parse(history.location.search), ...params }, _.isNil)\n      )\n    });\n  };\n};\n\nexport const getLocationDescriptionObject = (\n  to: History.LocationDescriptor\n): LocationDescriptorObject => (typeof to === 'string' ? { pathname: to } : to);\n","import { Location } from 'history';\nimport { matchPath } from 'react-router';\nimport _ from 'lodash';\nimport { ReactNode } from 'react';\n\n/**\n * The aim of this utility it to provide react-router definition of menus, tabs from Ant Design which require specyfying selectedKeys in the parent component.\n * Usually when using react-router you just set 'selected' property on particular child item.\n * This utility gets items description containing routing information, combines with recent *location* object and provides array of selected items that match given route.\n */\n\nexport interface IMenuItem {\n  link: string;\n  path: string;\n  exact?: boolean;\n  strict?: boolean;\n  label: ReactNode;\n  icon?: string;\n  children?: IMenuItem[];\n}\n\nexport const getSelectedPaths = (\n  location: Location,\n  menuItems: IMenuItem[],\n  keyPrefix: string = ''\n): string[] =>\n  menuItems\n    .map(m => {\n      const key = keyPrefix + m.link;\n      const match = matchPath(\n        location.pathname,\n        _.pick(m, 'exact', 'strict', 'path')\n      );\n      const childrenMatches = m.children\n        ? getSelectedPaths(location, m.children, key + '.')\n        : [];\n\n      const result: string[] = [];\n      if (match) {\n        result.push(key);\n      }\n      result.push(...childrenMatches);\n      return result;\n    })\n    .reduce((acc, paths) => [...acc, ...paths], []);\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAHy0lEQVR4nO3dT2ikdwHG8adDCGEJdV20hwUXD1J6Wjz00KMX/7J0FSrqQdFT1buCQgXxIOihgojgxZPWUkVapOAirRYPRSh4LD1JFQ+1SF2WsISQeJjEbLOTzcR9Z95Mns8Hwu5O3v2972HmO+/vnXnf94G9vb0AnSZjbwAwHgGAYgIAxQQAigkAFBMAKCYAUEwAoJgAQLG1E36/meSRJFeSPLj/k0zD8eCM5W8n+cFgWze/zyd5eIT10uuNJL8aYb3fTLIx4/GbSXb3f24leTvJm0leT7J93GAPHPNV4KtJvp/kYzk5End6O8n7T7H8UJ5P8vgI66XXC0muj7DefyV53ymWv53kD0l+nOTG0V8enQJMknw3yWtJPpXTvfiBs2cjybUkv0/y0xx5TU+O/P3nSb5zdCHgXPhqkt/mjun7nQH4dpIvLXuLgKW6lumUeS05DMCHkjw11hYBS/WRJJ9ODgPwrSTrY20NsHQfTQ4D8NiIGwIs38PJYQCujLghwPJdSaYBWM/0Cz9Aj4eSaQAujrwhwPJtJlmbJLkw9pYAo9gUAOh18eAYANBnY5LZZxYB558AQLGLLggCxQQAel0wBYBea2sZ9lOASU53tZKh+CSDZVvPOM/1Qffah77wx6VML1kE590ncg6e644BQK8LAgC91gUAigkAFJtEBKDWJC4GAq0u2AOAXg4CQjMBgGICAMUEAIoJABQTACgmANBrQwCg14bLgkMxNwaBYqYAUEwAoJgAQDEBgGICAMUEAIoJABQTACgmAFBMAKCYAECxoW8OejPJFwYecx5PJXlshPXS69Uk3xthvc8keXCowYYOwHaSFwcecx5PjrBOur2VcZ7r20MOZgoAxQQAigkAFBMAKCYAUEwAoJgAQDEBgGICAMUEAIoJABQTACgmAFBMAKCYAEAxAYBiAgDFJkk2xt4IYBwCAMVMAaCYAEAxAYBiAgDFBACKCQAUEwAoJgBQbOh7A24keWLgMedxeYR10u1yxnmuD/rFvaEDsJnkuYHHhLPo0ZyD57opABQTACgmAFBMAKCYAEAxAYBiAgDFBACKCQAUEwAoJgBQTACgmABAMQGAYgIAxQQAigkAFBMAKCYAUEwAoJgAQDEBgGICAMUEAIoJABQTACgmAFBMAKDY0DcH3UnyoyR/SnIzyfb+n0mye8ffc8djt/b/vB/PJrl2n2PAadxI8pU5ltvIve/ou5m7X4eT/cePvkFfSfL0CeOdytAB2E7ymySvDjzuSe43IHBat5P8c8nrfCTTN9nBDD0FOHhHB1bAIo4BDFooYHHsAUCxRewBmI/DivAxIKyOIT4xe5ehA7ATUwBYlMH3rk0BoJgpABQTACgmAFBsEQHYWsCYwPRcmjP/VWAHAWFFmAJAMQGAYgIAxQQAigkAFBMAWB0rcS4AsBhbOeNnAwIrRACgmABAMQGAYgIAxQQAigkAFBMAKDb0vQE3k/xk4DHncXWEddLtasZ5rm8OOdjQAdhI8vWBx4Sz6IM5B891UwAoJgBQTACgmABAMQGAYgIAxQQAigkAFBMAKCYAUEwAoJgAQDEBgGICAMUEAIoJABQTACgmAFBMAKCYAEAxAYBiAgDFBACKCQAUEwAoJgBQTACg2ND3BkySnSTvJLmdZHv/ZyfJ7oxlt495/LQeTnJxgHFgXjeT/G2O5dZy7zfa9RmPTY55fD3JpRPGO5WhA7Cd5BtJ/pjk1v6/t3IYgVnLDxGA55M8PsA4MK9Xknx2juXWc+/X2UZmv6A3Zjx2Nckvjvnd/2URAbiR5PWBx4WzZjfTvdyTzLPMvC5lmDfM/3EMAIoNHYDdTHf5gRWwiD2AWXN94AwyBYBiAgDFBACKCQAUEwAoJgBQTACgmABAMQGAYgIAxQQAigkAFFtEAEQFVsQkw569N0lyYcDxgAWaZPjz9+0BwIqYZOBLDAGrw7s1FBMAKLaIACziXgPAAgwdAJ8CwAoxBYBiAgDFBACKCQAUG/qI/XqSryW5PuN3/8ndXzrazfQuq8fZyfQmoye5PNfWwXAuJ3lijuUuZPadfg9s5u7X4STJe45Z573GOrWhA7CW5MsDjwln0aNJnht7I+6XKQAUEwAoJgBQbJJke+yNAEaxvYjrAQCrYcsUAIoJABQTACgmAFBMAKCYAECxoe8LAKyOHd8DgF5b7gsAvXYdA4BiAgDFHASEXk4GgmJOBoJmAgDFHAOAXruTzHfZbeD8uWUKAMXsAUCvmwIAvbYmSW6PvRXAKG4/sLe3lyR7Y28JsHTvPTgI6NuA0Gfr4Oag72R6F9P79e8kHxhgnNN6Nsm1EdZLr98l+dwI6/17kksDjLOVZPsgAG9lmFts72acvQnXNGDZVv25/lZy+FXgfww0KLAa3kwOA/D6iBsCLN8byWEAXh5xQ4Dlezk5DMCNJC+Nty3AEv0lya+TwwDsJPlMkhfH2iJgKV5J8skk28m7rwdwM8n1JD8bYaOAxftlko9n+nF9krsvCLKT5MlMQ/BSXCsAVt1ukj9n+p2FL+bIV//XZv2PJC/s/2wm+XCSK0ke2v/3vU4hHuu8gmeSvDbSuun0xkjr/WGSjXv8fjfTE/zezvSjvr9munc/08G5AEAhFwSBYgIAxQQAigkAFBMAKCYAUEwAoJgAQDEBgGL/BXZP21+fwOt7AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","export { default as withFading } from './withFading';\n\nexport * from './hooks';\nexport * from './getSelectedPaths';\nexport * from './hoc';\n","import React, { Fragment } from 'react';\nimport { Switch } from 'react-router-dom';\n\n// react-router doesn't have support for React fragments in <Switch />. This component\n// wraps react-router's <Switch /> so that it gets fragment support.\n//\n// https://github.com/ReactTraining/react-router/issues/5785\nexport default function FragmentSupportingSwitch({ children }) {\n  const flattenedChildren = [];\n  flatten(flattenedChildren, children);\n  return React.createElement(...[Switch, null].concat(flattenedChildren));\n}\n\nfunction flatten(target, children) {\n  React.Children.forEach(children, child => {\n    if (React.isValidElement(child)) {\n      if (child.type === Fragment) {\n        flatten(target, child.props.children);\n      } else {\n        target.push(child);\n      }\n    }\n  });\n}\n","import React, { ReactElement } from 'react';\nimport styled from 'styled-components';\n\ninterface IProps {\n  primaryContent?: ReactElement<any>;\n  secondaryContent?: ReactElement<any>;\n}\n\nexport const ContentLayout = ({\n  secondaryContent,\n  primaryContent,\n  ...rest\n}: IProps) => (\n  <div {...rest}>\n    {primaryContent}\n    {secondaryContent}\n  </div>\n);\n\nexport default styled(ContentLayout)`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n`;\n","import styled from 'styled-components';\n\nexport const VBox = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const HBox = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n`;\n\nexport const Spacer = styled.div`\n  flex-grow: 1;\n`;","import styled from 'styled-components';\nimport React from 'react';\n\nexport default <P>(c: React.ComponentType<P>) => styled(c)`\n  background: #fdfdfd;\n  padding-left: ${p => p.theme.layout.main.margin}px;\n  padding-right: ${p => p.theme.layout.main.margin}px;\n\n  border-bottom: 1px solid #e8e8e8;\n  flex-shrink: 0; // primary content never shrinks in a flex layout\n\n  .navigation {\n    margin-top: 26px;\n    margin-bottom: 26px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    min-height: 32px; // do not jump the screen when toolbar presence changes\n    > *:not(:last-child) {\n      margin-right: 10px;\n    }\n  }\n\n  .title {\n    font-size: 20px;\n    font-weight: 500;\n    color: rgba(0, 0, 0, 0.85);\n    margin-bottom: 22px;\n  }\n\n  .tabs {\n    .ant-tabs-bar {\n      margin: 0;\n      border-bottom-color: transparent;\n    }\n    .ant-tabs-nav .ant-tabs-tab-active {\n      font-weight: 400;\n    }\n  }\n\n  & > :last-child:not(.tabs) {\n    // we need some margin at the bottom unless we have toolbar which sticks to the edge\n    margin-bottom: 26px;\n  }\n`;\n","import React, { ComponentType, ReactNode } from 'react';\nimport withStyled from './DefaultPrimaryContent.styled';\nimport { HBox, Spacer, VBox } from './layout';\n\ninterface IProps {\n  breadcrumbs?: ReactNode;\n  tools?: ReactNode;\n  title?: ReactNode;\n  content?: ReactNode;\n  tabs?: ReactNode;\n}\n\nconst DefaultPrimaryContent = ({\n  breadcrumbs,\n  tools,\n  title,\n  content,\n  tabs,\n  ...rest\n}: IProps) => (\n  <VBox {...rest}>\n    {(breadcrumbs || tools) && (\n      <HBox className=\"navigation\">\n        {breadcrumbs}\n        <Spacer />\n        {tools}\n      </HBox>\n    )}\n    {title && <div className=\"title\">{title}</div>}\n    {content && <div className=\"content\">{content}</div>}\n    {tabs && <div className=\"tabs\">{tabs}</div>}\n  </VBox>\n);\n\nexport default withStyled(DefaultPrimaryContent) as ComponentType<IProps>;\n","import styled from 'styled-components';\n\nexport default styled.div`\n  flex: 1;\n  width: 100%;\n  min-height: 0; // important to not overflow flex container when browser height is reduced\n  padding: ${p => p.theme.layout.main.margin / 2}px;\n  overflow: auto;\n`;\n","import styled from 'styled-components';\nimport {ComponentType} from 'react';\nimport * as _ from 'lodash';\n\nexport interface ScrollbarStyleConfiguration {\n  thumb: string;\n}\n\nexport type DefaultThemeNames = 'light' | 'dark';\n\nconst defaultThemes: { [key in DefaultThemeNames]: ScrollbarStyleConfiguration } = {\n  light: {\n    thumb: 'rgba(255,255,255,0.15)'\n  },\n  dark: {\n    thumb: 'rgba(0,0,0,0.15)'\n  }\n};\n\nconst withSublimeScrollbar = (theme: ScrollbarStyleConfiguration | DefaultThemeNames = 'light') => {\n  const actual: ScrollbarStyleConfiguration = _.isString(theme) ? defaultThemes[theme] : theme;\n\n  return <P extends object>(c: ComponentType<P>) =>\n    (styled(c)`\n      ::-webkit-scrollbar {\n        width: 22px;\n      }\n      ::-webkit-scrollbar-thumb {\n        border: 6px solid transparent;\n        border-radius: 30px;\n        background-clip: padding-box;\n        min-height: 30px;\n        background-color: ${actual.thumb};\n      }\n    ` as unknown) as ComponentType<P>;\n};\nexport default withSublimeScrollbar;\n","import styled from 'styled-components';\nimport { SiderProps } from 'antd/es/layout';\nimport * as React from 'react';\nimport { ComponentType, HTMLProps, ReactNode } from 'react';\nimport { Layout } from 'antd';\nimport withSublimeScrollbar from './withStyledScrollbar';\n\ninterface IProps extends SiderProps {\n  logo?: ReactNode;\n  content?: ReactNode;\n}\n\nconst { Sider } = Layout;\n\nconst Scroll = withSublimeScrollbar()((p: HTMLProps<HTMLDivElement>) => (\n  <div {...p} />\n));\n\nfunction AppSider(props: IProps) {\n  const { logo, content, ...rest } = props;\n\n  return (\n    <Sider\n      trigger={undefined}\n      collapsible\n      width={256}\n      breakpoint=\"md\"\n      {...rest}\n    >\n      <div className=\"sider-header\">{logo}</div>\n      <Scroll className=\"sider-content\">{content}</Scroll>\n    </Sider>\n  );\n}\nexport default styled(AppSider)`\n  box-shadow: 2px 0 6px rgba(0, 21, 41, 0.35);\n  color: #ffffff;\n  .ant-layout-sider-children {\n    display: flex;\n    flex-direction: column;\n  }\n  .sider-header {\n    height: 64px;\n    line-height: 64px;\n    background: #002140;\n    overflow: hidden;\n    flex-shrink: 0;\n  }\n  .sider-content {\n    overflow: auto;\n    flex-shrink: 1;\n  }\n` as ComponentType<IProps>;\n","import React, { ComponentType, FunctionComponent, ReactNode } from 'react';\nimport styled from 'styled-components';\nimport { Layout } from 'antd';\nimport { LayoutProps } from 'antd/es/layout';\nimport AppSider from './AppSider';\n\nexport interface AppProps extends Partial<LayoutProps> {\n  sider: ReactNode;\n  header: ReactNode;\n  content: ReactNode;\n  drawer?: ReactNode;\n  modals?: ReactNode;\n}\n\nconst AppPure: FunctionComponent<AppProps> = ({\n  sider,\n  header,\n  content,\n  drawer,\n  modals,\n  ...rest\n}) => (\n  <Layout{...rest}>\n    {sider}\n    <Layout id=\"content-portal-container\">\n      {header}\n      {content}\n    </Layout>\n    {drawer}\n    {modals}\n  </Layout>\n);\n\nexport default styled(AppPure)`\n  height: 100vh;\n  #content-portal-container {\n    position: relative;\n  }\n  ${(AppSider as unknown) as string /* https://github.com/styled-components/webstorm-styled-components/issues/58 */} {\n    z-index: 10;\n  }\n` as ComponentType<AppProps>;\n","import { MenuProps } from 'antd/es/menu';\nimport React, { FunctionComponent } from 'react';\nimport { Menu } from 'antd';\nimport withAntdFix from './withAppMenuRouted';\n\ninterface IProps extends MenuProps {\n  menuNodes: JSX.Element[];\n  selectedNodes: string[];\n}\nconst AppMenu: FunctionComponent<IProps> = ({\n  menuNodes,\n  selectedNodes,\n  ...rest\n}) => (\n  <Menu theme=\"dark\" mode=\"inline\" selectedKeys={selectedNodes} {...rest}>\n    {menuNodes}\n  </Menu>\n);\nexport default withAntdFix(AppMenu);\n","/**\n * The aim of this HOC is to provide valid menu subtree together with two critical Menu properties:\n * selectedKeys and openKeys - based on actual location and route matching.\n *\n * It consumes menuConfiguration and location.\n * It produces menuNodes and selectedNodes.\n *\n * There is no way to configure specific menu item with react-router. Instead, all routes have to be processed using react-router's matchPath function.\n */\n\nimport {\n  getSelectedPaths,\n  HOCInnerType,\n  HOCOuterType,\n  IMenuItem,\n  useRouter\n} from '../../misc';\nimport { Icon, Menu } from 'antd';\nimport React, { ReactNode } from 'react';\nimport { Link } from 'react-router-dom';\n\nexport interface IEnhanceProps {\n  menuConfiguration: IMenuItem[];\n  renderer?: MenuItemRenderer;\n}\nexport interface IInjectProps {\n  menuNodes: JSX.Element[];\n  selectedNodes: string[];\n}\n\nexport type MenuItemRenderer = (item: IMenuItem) => ReactNode;\n\nconst createMenuNodes = (\n  menuItems: IMenuItem[],\n  keyPrefix: string = '',\n  renderer: MenuItemRenderer\n): JSX.Element[] =>\n  menuItems.map(m => {\n    const key = keyPrefix + m.link;\n    const label = (\n      <>\n        {m.icon && <Icon type={m.icon} />}\n        <span>{m.label}</span>\n      </>\n    );\n    return m.children ? (\n      <Menu.SubMenu title={label} key={key}>\n        {createMenuNodes(m.children, key + '.', renderer)}\n      </Menu.SubMenu>\n    ) : (\n      <Menu.Item key={key}>{renderer(m)}</Menu.Item>\n    );\n  });\n\nconst withAntdFix = <P extends IInjectProps>(\n  InnerComponent: HOCInnerType<P>\n): HOCOuterType<P, IInjectProps, IEnhanceProps> => props => {\n  const { location } = useRouter();\n  const {\n    menuConfiguration,\n    renderer,\n    ...rest\n  } = (props as unknown) as IEnhanceProps;\n\n  const menuNodes = createMenuNodes(\n    menuConfiguration,\n    undefined,\n    renderer ||\n      (m => (\n        <Link to={m.path}>\n          {m.icon && <Icon type={m.icon} />}\n          <span>{m.label}</span>\n        </Link>\n      ))\n  );\n  const selectedNodes: string[] = getSelectedPaths(\n    location,\n    menuConfiguration\n  ).filter(s => s !== undefined) as string[];\n\n  return (\n    <InnerComponent\n      selectedNodes={selectedNodes}\n      menuNodes={menuNodes}\n      {...rest as P}\n    />\n  );\n};\nexport default withAntdFix;\n","import React from 'react';\nimport {Icon, Tabs} from 'antd';\nimport {getSelectedPaths, HOCInnerType, HOCOuterType2, IMenuItem, useRouter} from '../../misc';\nimport {LocationDescriptor} from 'history';\n\nexport interface IEnhanceProps {\n  menuConfiguration: IMenuItem[];\n  onMenuSelect: (to: LocationDescriptor) => void;\n}\n\nexport interface IInjectProps {\n  activeKey?: string;\n  onChange?: (activeKey: string) => void;\n}\nconst createMenuNodes = (menuItems: IMenuItem[]): JSX.Element[] =>\n  menuItems.map(m => {\n    return (\n      <Tabs.TabPane\n        key={m.link}\n        tab={\n          <>\n            {m.icon && <Icon type={m.icon} />}\n            <span>{m.label}</span>\n          </>\n        }\n      />\n    );\n  });\n\nconst withRoutedTabs = <P extends IInjectProps>() => (\n  InnerComponent: HOCInnerType<P>\n): HOCOuterType2<P, IInjectProps, IEnhanceProps> => props => {\n  const route = useRouter();\n\n  const { menuConfiguration, onMenuSelect, ...rest } = (props as unknown) as IEnhanceProps;\n  const menuNodes = createMenuNodes(menuConfiguration);\n  const selectedNodes: string[] = getSelectedPaths(route.location, menuConfiguration).filter(\n    s => s !== undefined\n  ) as string[];\n\n  return (\n    <InnerComponent\n      activeKey={selectedNodes[0]}\n      children={menuNodes}\n      onChange={activeKey => {\n        const activeMenuItem = menuConfiguration.find(s => s.path === activeKey);\n        if (activeMenuItem) {\n          onMenuSelect(activeMenuItem.link);\n        }\n      }}\n      {...rest as P}\n    />\n  );\n};\n\nexport default withRoutedTabs;\n\nexport const RoutedTabs = withRoutedTabs()(Tabs);\n","import { Link } from 'react-router-dom';\nimport { FunctionComponent } from 'react';\nimport React from 'react';\nimport styled from 'styled-components';\n\ninterface DefaultAppLogoProps {\n  logo: string;\n}\n\nconst DefaultAppLogo: FunctionComponent<DefaultAppLogoProps> = ({\n  logo,\n  ...rest\n}) => (\n  <Link to=\"/\" {...rest}>\n    <img className=\"app-logo\" src={logo} />\n    <div className=\"app-name\">Movies Explorer</div>\n  </Link>\n);\nexport default styled(DefaultAppLogo)`\n  .app-logo {\n    display: inline-block;\n    vertical-align: middle;\n    height: 32px;\n    margin-left: 23px;\n  }\n\n  .app-name {\n    color: white;\n    display: inline-block;\n    vertical-align: middle;\n    font-size: 20px;\n    margin: 0 0 0 12px;\n    font-family: 'Myriad Pro', 'Helvetica Neue', Arial, Helvetica, sans-serif;\n    font-weight: 600;\n  }\n`;\n","export type Theme = {\n  palette: {\n    primaryColor: string;\n  };\n\n  layout: {\n    main: {\n      margin: number;\n    };\n  };\n};\n\nconst baseTheme: Theme = {\n  palette: {\n    primaryColor: '#e6f7ff'\n  },\n  layout: {\n    main: {\n      margin: 48\n    }\n  }\n};\n\nexport default baseTheme;\n","import React, { FunctionComponent } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nexport default styled.div`\r\n  height: 64px;\r\n  display: flex;\r\n  flex-shrink: 0;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  background: #ffffff;\r\n  padding-left: 12px;\r\n  padding-right: 12px;\r\n\r\n  box-shadow: 0 1px 4px rgba(0, 21, 41, 0.08);\r\n  z-index: 3;\r\n\r\n  > *:not(:last-child) {\r\n    margin-right: 10px;\r\n  }\r\n`;\r\n","export const toRootPage = ()=>`${process.env.PUBLIC_URL}/`;","import { useRouteParams } from '../../common/misc';\r\nimport { toRootPage } from '../core/routing';\r\n\r\nexport const toMovieListPage = () => `${toRootPage()}/movies`;\r\nexport const toMovieViewPage = (id = ':id') => `${toMovieListPage()}/${id}`;\r\n\r\nexport const useMovieId = () => {\r\n  const params = useRouteParams();\r\n  return params.id ? parseInt(params.id) : undefined;\r\n};\r\n","import styled from 'styled-components';\nimport React from 'react';\n\nexport default <P>(c: React.ComponentType<P>) => styled(c).attrs(\n  // @ts-ignore\n  {\n    suppressClassNameWarning: true\n  }\n)`\n  .certain-category-search.ant-select-auto-complete\n    .ant-input-affix-wrapper\n    .ant-input-suffix {\n    right: 12px;\n  }\n\n  .ant-select-dropdown-menu-item-group-title {\n    color: #666;\n    font-weight: bold;\n  }\n\n  .ant-select-dropdown-menu-item-group {\n    border-bottom: 1px solid #f6f6f6;\n  }\n\n  .ant-select-dropdown-menu-item {\n    padding-left: 16px;\n  }\n\n  .ant-select-dropdown-menu-item.show-all {\n    text-align: center;\n    cursor: default;\n  }\n\n  .ant-select-dropdown-menu {\n    max-height: 75vh;\n  }\n\n  .certain-search-item-count {\n    position: absolute;\n    color: #999;\n    right: 16px;\n  }\n\n  .certain-category-search.ant-select-focused .certain-category-icon {\n    color: #108ee9;\n  }\n\n  .certain-category-icon {\n    color: #6e6e6e;\n    transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n    font-size: 16px;\n  }\n\n  .search-context-item {\n    em {\n      color: #108ee9;\n      font-weight: bold;\n      font-style: normal;\n    }\n  }\n`;\n","import React, {\n    Component,\n    ComponentType, memo,\n    ReactElement,\n    ReactNode,\n    RefObject\n} from 'react';\nimport { AutoComplete, Input } from 'antd';\nimport withStyled from './Search.styled';\nimport { AutoCompleteProps, DataSourceItemType } from 'antd/es/auto-complete';\nimport { compose } from 'redux';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport { Assign } from 'utility-types';\nimport { SelectValue } from 'antd/lib/select';\n\ntype IProps = Assign<\n  AutoCompleteProps,\n  {\n    dataSource: DataSourceItemType[];\n    onSearch?: (searchText: string) => void;\n    onSelect?: (value: SelectValue, option: Object) => any;\n    value?: string;\n    searchPrompt?: string;\n    notFoundContent: ReactNode;\n  }\n>;\n\nconst chars = 'abcdefghijklmnoprstuwxyz0123456789'.split('');\nconst keys = [...chars, ...chars.map(x => 'shift+' + x)];\nconst focusKeys = ['ctrl+f'];\n\nclass Complete extends Component<IProps> {\n  private ref: RefObject<AutoComplete>;\n  static defaultProps = { searchPrompt: 'Search...' };\n\n  constructor(props: IProps) {\n    super(props);\n    this.ref = React.createRef();\n  }\n\n  public render() {\n    const { className, onSearch, onSelect, searchPrompt, ...rest } = this.props;\n    return (\n      <>\n        <KeyboardEventHandler\n          handleKeys={keys}\n          onKeyEvent={this.handleKeyEvent}\n        />\n        <KeyboardEventHandler\n          handleKeys={focusKeys}\n          onKeyEvent={this.handleKeyEvent}\n          handleFocusableElements\n        />\n        <AutoComplete\n          tabIndex={0}\n          ref={this.ref}\n          className=\"certain-category-search\"\n          dropdownClassName={className}\n          dropdownMatchSelectWidth={false}\n          dropdownStyle={{ width: 300 }}\n          size=\"large\"\n          style={{ width: 500 }}\n          placeholder={searchPrompt}\n          optionLabelProp=\"value\"\n          onSearch={onSearch}\n          onSelect={onSelect}\n          {...rest}\n        >\n          <Input />\n        </AutoComplete>\n      </>\n    );\n  }\n\n  private handleKeyEvent = (char: string, e: KeyboardEvent) => {\n    if (this.ref.current) {\n      this.ref.current.focus();\n      e.preventDefault();\n    }\n  };\n}\n\nexport default memo(withStyled(Complete)) as ComponentType<IProps>;\n\n// todo move to hooks functional component\n","import {stringify} from 'querystring';\r\nimport {Observable} from 'rxjs';\r\n\r\n// due to https://github.com/omdbapi/OMDb-API/issues/37 http://www.omdbapi.com/ is not used!\r\nconst apiHost = 'https://api.themoviedb.org/3/';\r\n\r\nexport const getApiUrl = (path: string, params?: object) =>\r\n  `${apiHost}${path}?${stringify({\r\n    ...params,\r\n    api_key: process.env.REACT_APP_DB_API_KEY\r\n  })}`;\r\nexport const getThumbUrl = (id?: string) => id && 'https://image.tmdb.org/t/p/w45/' + id;\r\nexport const getPosterUrl = (id?: string) => id && 'https://image.tmdb.org/t/p/w500/' + id;\r\nexport const PAGE_SIZE = 20; // defined by TMDB;\r\n\r\nconst yearMatcher = /^\\d\\d\\d\\d/;\r\nexport const getReleaseYear = (date: string = '') => {\r\n  const match = date.match(yearMatcher);\r\n  return (match && match[0]) || '(no release info)';\r\n};\r\n\r\nexport interface ApiResponse<Data> {\r\n  page: number;\r\n  total_results: number;\r\n  total_pages: number;\r\n  results: Data[];\r\n}\r\n\r\nexport type FindService<Entity> = (query: string, page?: number, year?: number) => Observable<ApiResponse<Entity>>;\r\nexport type PopularService<Entity> = (page?: number) => Observable<ApiResponse<Entity>>;\r\nexport type GetService<Entity> = (id: number) => Observable<Entity>;\r\n","import {ApiResponse, FindService, getApiUrl, GetService, PopularService} from '../../../common/api';\r\nimport {ajax} from 'rxjs/ajax';\r\nimport {map} from 'rxjs/operators';\r\nimport {IMovie, IMovieLite} from '../types/state';\r\n\r\nconst shiftPageNumber = <T extends ApiResponse<any>>(response: T): T => {\r\n  return { ...response, page: response.page - 1 };\r\n};\r\n\r\nexport const findMovies: FindService<IMovieLite> = (query, page = 0, year) =>\r\n  ajax(\r\n    getApiUrl('search/movie', {\r\n      page: (page + 1).toString(),\r\n      query,\r\n      primary_release_year: year\r\n    })\r\n  ).pipe(map(value => shiftPageNumber(value.response)));\r\n\r\nexport const findPopularMovies: PopularService<IMovieLite> = (page = 0) =>\r\n  ajax(\r\n    getApiUrl('movie/popular', {\r\n      page: (page + 1).toString()\r\n    })\r\n  ).pipe(map(value => shiftPageNumber(value.response)));\r\n\r\nexport const getMovie: GetService<IMovie> = id =>\r\n  ajax(getApiUrl(`movie/${id}`, {})).pipe(map(value => shiftPageNumber(value.response)));\r\n","import {IMovieBrowser, IMovieLite} from '../types/state';\r\nimport {IState} from '../../../common/types/state';\r\nimport {ITypeAheadState} from '../../../common/aspects/typeahead/types';\r\n\r\nexport const selectMovieBrowser = (state: IState): IMovieBrowser => state.movieBrowser as IMovieBrowser;\r\n\r\nexport const selectMovieTypeAhead = (state: IState): ITypeAheadState<IMovieLite> => selectMovieBrowser(state).typeAhead;\r\nexport const selectMovieDetails = (state: IState) => selectMovieBrowser(state).details;\r\nexport const selectMovieList = (state: IState) => selectMovieBrowser(state).list;\r\n","import {Epic} from 'redux-observable';\r\nimport _ from 'lodash';\r\nimport {catchError, debounce, filter, map, mergeMap, skip, take} from 'rxjs/operators';\r\nimport {concat, merge, of, race, timer} from 'rxjs';\r\nimport {FindService, PAGE_SIZE, PopularService} from '../../api';\r\nimport {IListActions, IListItems, SelectList} from './types';\r\n\r\nexport const createEpics = <Entity extends object>(\r\n  actions: IListActions<Entity>,\r\n  findService: FindService<Entity>,\r\n  popularService: PopularService<Entity>,\r\n  selectList: SelectList<Entity>\r\n): Epic => {\r\n  const selectPageNeedsToBeLoaded$ = (items: IListItems<Entity>, page: number) => {\r\n    const firstInPage = page * PAGE_SIZE;\r\n    const item = items[firstInPage];\r\n    return item === undefined || item.error !== undefined;\r\n  };\r\n\r\n  const getFetchPageAction = (requestAction: ReturnType<typeof actions.pageRangeEnsure>, page: number) =>\r\n    requestAction.payload.query\r\n      ? findService(requestAction.payload.query, page, requestAction.payload.year)\r\n      : popularService(page);\r\n\r\n  const requestAllPages = (pages: number[], ensureAction: ReturnType<typeof actions.pageRangeEnsure>) =>\r\n    merge(\r\n      ...pages.map(page =>\r\n        getFetchPageAction(ensureAction, page).pipe(\r\n          map(response => actions.pageResponse({ response })),\r\n          catchError(err => of(actions.pageError({ page, error: err })))\r\n        )\r\n      )\r\n    );\r\n\r\n  return (action$, state$) => {\r\n    const pagesToLoad$ = action$.pipe(filter(actions.pageRangeEnsure.match));\r\n\r\n    return pagesToLoad$.pipe(\r\n      debounce(() => timer(100)),\r\n      mergeMap(ensureAction => {\r\n        const data = selectList(state$.value).items;\r\n        const pagesToLoad = _.range(ensureAction.payload.startPage, ensureAction.payload.stopPage + 1, 1).filter(page =>\r\n          selectPageNeedsToBeLoaded$(data, page)\r\n        );\r\n        return concat(\r\n          of(actions.pageRequest({ pages: pagesToLoad })),\r\n          race(\r\n            requestAllPages(pagesToLoad, ensureAction),\r\n            pagesToLoad$.pipe(\r\n              skip(1), // fixme effectively disables cancellation, problem needs to be investigated before turning cancellation on back again\r\n              // maybe not use redux at all, just store some download cache info?\r\n              take(1),\r\n              map(() => actions.pageCancel({ pages: pagesToLoad }))\r\n            ),\r\n            action$.pipe(\r\n              filter(actions.reset.match),\r\n              take(1),\r\n              map(() => actions.pageCancel({ pages: pagesToLoad }))\r\n            )\r\n          )\r\n        );\r\n      })\r\n    );\r\n  };\r\n};\r\n","export const optional = <T extends any>(currentValue?: T, defaultValue?: T) => (currentValue === undefined ? defaultValue : currentValue);\r\n","import {IListActions, SelectList, UseYear} from '../types';\r\nimport {useDispatch, useMappedState} from 'redux-react-hook';\r\nimport {useCallback, useEffect, useState} from 'react';\r\nimport {useDebounce} from 'react-use';\r\nimport {PAGE_SIZE} from '../../../api';\r\nimport {UseValue} from '../../../types/hooks';\r\n\r\nconst selectPageOfRow = (page: number) => Math.floor(page / PAGE_SIZE);\r\nexport const createUsePaginatedList = <Entity extends object>(\r\n  actions: IListActions<Entity>,\r\n  useYear: UseYear,\r\n  useSearchValue: UseValue,\r\n  selectList: SelectList<Entity>\r\n) => () => {\r\n  const year = useYear();\r\n  const query = useSearchValue();\r\n  const { items, total: _total } = useMappedState(selectList);\r\n\r\n  const total = _total === null ? undefined : _total; // reducer can't return undefined, we need to translate that value\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(actions.reset());\r\n  }, [query, year]);\r\n\r\n  const [bounds, setBounds] = useState<undefined | { start: number; stop: number }>({ start: 0, stop: 0 });\r\n  useDebounce(\r\n    () =>\r\n      bounds &&\r\n      dispatch(\r\n        actions.pageRangeEnsure({\r\n          query,\r\n          year,\r\n          startPage: bounds.start,\r\n          stopPage: bounds.stop\r\n        })\r\n      ),\r\n    100,\r\n    [query, year, bounds]\r\n  );\r\n\r\n  const onItemsRendered = useCallback(\r\n    ({ visibleStartIndex, visibleStopIndex }) => {\r\n      const fetchRowOverscan = 20;\r\n      const [firstPageToLoad, lastPageToLoad] = [\r\n        Math.max(0, visibleStartIndex - fetchRowOverscan),\r\n        Math.min((total || 1) - 1, visibleStopIndex + fetchRowOverscan)\r\n      ].map(selectPageOfRow);\r\n\r\n      setBounds({ start: firstPageToLoad, stop: lastPageToLoad });\r\n    },\r\n    [year, query, items]\r\n  );\r\n\r\n  return { onItemsRendered, items, total, query, year };\r\n};\r\n","import {History, LocationDescriptor, LocationDescriptorObject} from 'history';\r\nimport {stringify} from 'querystring';\r\nimport {useQueryParams, useRouter} from '../misc';\r\nimport _ from 'lodash';\r\nimport {Link, LinkProps} from 'react-router-dom';\r\nimport React, {ComponentType, FunctionComponent} from 'react';\r\n\r\nexport const getLocationDescriptionObject = (to: History.LocationDescriptor): LocationDescriptorObject =>\r\n  typeof to === 'string' ? { pathname: to } : to;\r\n\r\nexport const getDescriptor = (to: LocationDescriptor, currentQueryParams?: object, queryParams?: object) => {\r\n  const locationDescription = getLocationDescriptionObject(to);\r\n  return { ...locationDescription, search: stringify(_.omitBy({ ...currentQueryParams, ...queryParams }, _.isEmpty)) };\r\n};\r\n\r\nexport const useHistoryPush = () => {\r\n  const currentQueryParams = useQueryParams();\r\n  const history = useRouter().history;\r\n  return (to: LocationDescriptor, queryParams?: object) => {\r\n    history.push(getDescriptor(to, currentQueryParams, queryParams));\r\n  };\r\n};\r\n\r\ninterface EnhanceProps {\r\n  queryParams?: object;\r\n}\r\ninterface PassProps {\r\n  to: LinkProps['to'];\r\n}\r\n\r\nexport interface QueryLinkProps extends EnhanceProps, PassProps {}\r\n\r\nexport const withQueryLink = <P extends PassProps>(\r\n  InnerComponent: ComponentType<P>\r\n): FunctionComponent<QueryLinkProps> => props => {\r\n  const currentQueryParams = useQueryParams();\r\n  const { to, queryParams, ...rest } = props as QueryLinkProps;\r\n\r\n  return <InnerComponent to={getDescriptor(to, currentQueryParams, queryParams)} {...rest as P} />;\r\n};\r\n\r\nexport const QueryLink = withQueryLink(Link);\r\n","import {useQueryParams} from '../misc';\r\nimport {useHistoryPush} from './useHistoryPush';\r\nimport {UseSetValue, UseValue} from '../types/hooks';\r\n\r\nexport const createUseSearchValue = (queryParamName: string): UseValue => () => useQueryParams()[queryParamName];\r\nexport const createUseGoToSearch = (route: string, queryParamName: string): UseSetValue => () => {\r\n  const pushHistory = useHistoryPush();\r\n  return (value?: string) => pushHistory(route, { [queryParamName]: value });\r\n};\r\n","import {createActions} from './actions';\r\nimport {ActionCreatorFactory} from 'typescript-fsa';\r\nimport {createReducers} from './reducers';\r\nimport {createEpics} from './epics';\r\nimport {SelectList} from './types';\r\nimport {createUseSetYear, createUseYear} from './hooks';\r\nimport {createUseYearInput} from './hooks/useYearInput';\r\nimport {createUsePaginatedList} from './hooks/usePaginatedList';\r\nimport {FindService, PopularService} from '../../api';\r\nimport {createUseGoToSearch, createUseSearchValue} from '../../hooks/hooks';\r\nimport {createUseListData} from './hooks/useListData';\r\n\r\nexport const createListAspect = <Entity extends object>(\r\n  actionCreatorFactory: ActionCreatorFactory,\r\n  findService: FindService<Entity>,\r\n  popularService: PopularService<Entity>,\r\n  selectList: SelectList<Entity>,\r\n  searchParam: string,\r\n  yearParam: string,\r\n  listRoute: string\r\n) => {\r\n  const actions = createActions<Entity>(actionCreatorFactory);\r\n  const reducer = createReducers(actions);\r\n  const epics = createEpics(actions, findService, popularService, selectList);\r\n  const useYear = createUseYear(yearParam);\r\n  const useSetYear = createUseSetYear(yearParam);\r\n  const useSearchValue = createUseSearchValue(searchParam);\r\n  const useGoToSearch = createUseGoToSearch(listRoute, searchParam);\r\n  const useYearInput = createUseYearInput(useYear, useSetYear, useSearchValue);\r\n  const usePaginatedList = createUsePaginatedList(actions, useYear, useSearchValue, selectList);\r\n  const useListData = createUseListData(actions, useSearchValue, selectList);\r\n\r\n  return {\r\n    actions,\r\n    reducer,\r\n    epics,\r\n    useYear,\r\n    useSetYear,\r\n    useSearchValue,\r\n    useGoToSearch,\r\n    useYearInput,\r\n    usePaginatedList,\r\n    useListData,\r\n    searchParam\r\n  };\r\n};\r\n","import {UseSetYear, UseYear} from './types';\r\nimport {useQueryParams, useSetQueryParams} from '../../misc';\r\n\r\nexport const createUseYear = (queryParamName: string): UseYear => () => {\r\n  const queryParams = useQueryParams();\r\n  return queryParams[queryParamName] ? parseInt(queryParams[queryParamName]) : undefined;\r\n};\r\n\r\nexport const createUseSetYear = (queryParamName: string): UseSetYear => () => {\r\n  const setQP = useSetQueryParams();\r\n  return (value?: number) => setQP({ [queryParamName]: value ? value.toString() : undefined });\r\n};\r\n","import {ActionCreatorFactory} from 'typescript-fsa';\r\nimport {IListActions} from './types';\r\n\r\nexport const createActions = <Entity extends object>(\r\n  actionCreatorFactory: ActionCreatorFactory\r\n): IListActions<Entity> => ({\r\n    reset: actionCreatorFactory('LIST_RESET'),\r\n    pageRangeEnsure: actionCreatorFactory('LIST_PAGE_DISPLAYED'),\r\n    pageRequest: actionCreatorFactory('LIST_PAGE_REQUEST'),\r\n    pageCancel: actionCreatorFactory('LIST_PAGE_CANCEL'),\r\n    pageResponse: actionCreatorFactory('LIST_PAGE_RESPONSE'),\r\n    pageError: actionCreatorFactory('LIST_PAGE_ERROR')\r\n});\r\n","import {IList, IListActions, IListItems} from './types';\r\nimport {combineReducers, Reducer} from 'redux';\r\nimport {PAGE_SIZE} from '../../api';\r\n\r\nexport const createReducers = <Entity extends object>(actions: IListActions<Entity>) => {\r\n  const total: Reducer<number | null> = (state = null, action) => {\r\n    if (actions.pageResponse.match(action)) {\r\n      return action.payload.response.total_results;\r\n    }\r\n    if (actions.reset.match(action)) {\r\n      return null;\r\n    }\r\n    return state;\r\n  };\r\n\r\n  const mapPageOntoList = <T extends any, U extends any>(\r\n    state: U[],\r\n    page: number,\r\n    results: T[],\r\n    map: (item: T, index: number, localIndex: number, oldItem: U) => U,\r\n    pageSize: number = PAGE_SIZE\r\n  ) => {\r\n    const newState = [...state];\r\n    const offset = page * pageSize;\r\n    results.forEach(\r\n      (movie, index) => (newState[index + offset] = map(movie, index + offset, index, newState[index + offset]))\r\n    );\r\n    return newState;\r\n  };\r\n\r\n  const items: Reducer<IListItems<Entity>> = (state: IListItems<Entity> = [], action) => {\r\n    if (actions.pageRequest.match(action)) {\r\n      return action.payload.pages.reduce(\r\n        (tmpState, page) =>\r\n          mapPageOntoList(tmpState, page, new Array(PAGE_SIZE).fill(undefined), () => ({\r\n            loading: true,\r\n            error: undefined,\r\n            result: undefined\r\n          })),\r\n        state\r\n      );\r\n    }\r\n    if (actions.pageCancel.match(action)) {\r\n      return action.payload.pages.reduce(\r\n        (tmpState, page) =>\r\n          mapPageOntoList(tmpState, page, new Array(PAGE_SIZE).fill(undefined), (result, index, localIndex, item) =>\r\n            item && item.loading ? undefined : item\r\n          ),\r\n        state\r\n      );\r\n    }\r\n\r\n    if (actions.pageResponse.match(action)) {\r\n      return mapPageOntoList(state, action.payload.response.page, action.payload.response.results, item => ({\r\n        loading: false,\r\n        error: undefined,\r\n        result: item\r\n      }));\r\n    }\r\n    if (actions.pageError.match(action)) {\r\n      return mapPageOntoList(state, action.payload.page, new Array(PAGE_SIZE).fill(undefined), () => ({\r\n        loading: false,\r\n        error: action.payload.error,\r\n        result: undefined\r\n      }));\r\n    }\r\n    if (actions.reset.match(action)) {\r\n      return [];\r\n    }\r\n    return state;\r\n  };\r\n\r\n  return combineReducers<IList<Entity>>({ items, total });\r\n};\r\n","import React, {useEffect, useState} from 'react';\r\nimport {optional} from '../../../utils';\r\nimport {useDebounce} from 'react-use';\r\nimport {UseSetYear, UseYear} from '../types';\r\nimport {UseValue} from '../../../types/hooks';\r\n\r\nexport const createUseYearInput = (useYear: UseYear, useSetYear: UseSetYear, useSearchValue: UseValue) => {\r\n  return () => {\r\n    const year = useYear();\r\n    const setYear = useSetYear();\r\n    const searchValue = useSearchValue();\r\n\r\n    const [value, setValue] = useState<string | undefined>(undefined);\r\n\r\n    const displayedValue = optional(value, year === undefined ? year : year.toString());\r\n\r\n    useEffect(() => {\r\n      setValue(year === undefined ? year : year.toString());\r\n    }, [year]);\r\n\r\n    useDebounce(\r\n      () => {\r\n        if (displayedValue === undefined || displayedValue === '') {\r\n          setYear(undefined);\r\n        } else {\r\n          const newYearValue = parseInt(displayedValue);\r\n          if (!isNaN(newYearValue) && newYearValue <= new Date().getFullYear() && newYearValue > 0) {\r\n            setYear(newYearValue);\r\n          }\r\n        }\r\n      },\r\n      400,\r\n      [value]\r\n    );\r\n\r\n    return { enabled: !!searchValue, value: displayedValue as any, onChange: (value: any) => setValue(value as any) };\r\n  };\r\n};\r\n","import {IListActions, SelectList} from '../types';\r\nimport {useMappedState} from 'redux-react-hook';\r\nimport {UseValue} from '../../../types/hooks';\r\n\r\nexport const createUseListData = <Entity extends object>(\r\n  action: IListActions<Entity>,\r\n  useSearchValue: UseValue,\r\n  selectList: SelectList<Entity>\r\n) => () => {\r\n  const query = useSearchValue();\r\n  const { total, items } = useMappedState(selectList);\r\n  return { total, items, query };\r\n};\r\n","import React from 'react';\r\nimport {useMappedState} from 'redux-react-hook';\r\nimport {Select} from 'antd';\r\nimport {ApiResponse} from '../../../api';\r\nimport _ from 'lodash';\r\nimport {DataSourceItemType} from 'antd/es/auto-complete';\r\nimport {optional} from '../../../utils';\r\nimport {ItemRenderer, SelectTypeAheadState} from '../types';\r\n\r\nconst { OptGroup, Option } = Select;\r\n\r\nexport const createUseSearchOptions = <Entity extends { id: number }>(\r\n  renderOptionContent: ItemRenderer<Entity>,\r\n  subject: string,\r\n  selectState: SelectTypeAheadState<Entity>\r\n) => {\r\n  const getSearchForSubjectOption = (\r\n    currentValue: string | undefined,\r\n    defaultValue: string | undefined,\r\n    total: number,\r\n    loading: boolean\r\n  ) => {\r\n    const actualValue = optional(currentValue, defaultValue);\r\n\r\n    return (\r\n      <Option key=\"_go_to_search\">\r\n        {actualValue ? (\r\n          <>\r\n            Search for \"\r\n            <em>\r\n              <strong>{actualValue}</strong>\r\n            </em>\r\n            \" in all {subject}\r\n          </>\r\n        ) : (\r\n          <>See most popular {subject}</>\r\n        )}\r\n        {!loading && <i style={{ float: 'right' }}>found {total}</i>}\r\n      </Option>\r\n    );\r\n  };\r\n\r\n  const getBestMatchesOptions = <T extends any>(options: ApiResponse<Entity>, loading: boolean) => {\r\n    const elements = options.results.slice(0, 5).map(result => (\r\n      <Option style={loading ? { opacity: 0.5 } : {}} value={result.id.toString()} key={result.id}>\r\n        {renderOptionContent(result)}\r\n      </Option>\r\n    ));\r\n    if (elements.length) {\r\n      return <OptGroup key=\"best_matches\" label=\"Best matches:\" children={elements} />;\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  return (\r\n    value: string | undefined, // '' means 'search nothing', undefined means get value from URL\r\n    defaultValue: string | undefined\r\n  ): DataSourceItemType[] => {\r\n    const { options, loading } = useMappedState(selectState);\r\n    const searchOption = getSearchForSubjectOption(value, defaultValue, options.total_results, loading);\r\n    const bestMatches = getBestMatchesOptions(options, loading);\r\n    return _.compact([searchOption, bestMatches]);\r\n  };\r\n};\r\n","import {ActionCreatorFactory} from 'typescript-fsa';\r\nimport {createActions} from './actions';\r\nimport {createReducers} from './reducers';\r\nimport {createEpics} from './epics';\r\nimport {FindService, PopularService} from '../../api';\r\nimport {createUseSearchOptions} from './hooks/useSearchOptions';\r\nimport {ItemRenderer, SelectTypeAheadState, ToViewPage} from './types';\r\nimport {createUseSearchInput} from './hooks/useSearchInput';\r\nimport {createUseGoToSearch, createUseSearchValue} from '../../hooks/hooks';\r\n\r\nexport const createTypeAheadAspect = <Entity extends { id: number }>(\r\n  actionCreatorFactory: ActionCreatorFactory,\r\n  findService: FindService<Entity>,\r\n  popularService: PopularService<Entity>,\r\n  itemRenderer: ItemRenderer<Entity>,\r\n  subject: string,\r\n  selectMovieTypeAhead: SelectTypeAheadState<Entity>,\r\n  searchParamName: string,\r\n  listRoute: string,\r\n  toViewPage: ToViewPage\r\n) => {\r\n  const actions = createActions<Entity>(actionCreatorFactory);\r\n  const reducer = createReducers(actions);\r\n  const epics = createEpics(actions, findService, popularService);\r\n  const useSearchOptions = createUseSearchOptions(itemRenderer, subject, selectMovieTypeAhead);\r\n  const useSearchValue = createUseSearchValue(searchParamName);\r\n  const useSearchInput = createUseSearchInput(\r\n    actions,\r\n    useSearchValue,\r\n    createUseGoToSearch(listRoute, searchParamName),\r\n    useSearchOptions,\r\n    toViewPage,\r\n    searchParamName\r\n  );\r\n  return {\r\n    actions,\r\n    reducer,\r\n    epics,\r\n    useSearchOptions,\r\n    useSearchInput\r\n  };\r\n};\r\n","import {ActionCreatorFactory} from 'typescript-fsa';\r\nimport {ITypeAheadActions} from './types';\r\n\r\nexport const createActions = <Entity extends object>(\r\n  actionCreatorFactory: ActionCreatorFactory\r\n): ITypeAheadActions<Entity> => ({\r\n  typeOccured: actionCreatorFactory('SEARCH_TYPE'),\r\n  typeResponse: actionCreatorFactory('SEARCH_TYPE_RESPONSE')\r\n});\r\n","import {combineReducers, Reducer} from 'redux';\r\nimport {ApiResponse} from '../../api';\r\nimport {isType} from 'typescript-fsa';\r\nimport {ITypeAheadActions, ITypeAheadState} from './types';\r\n\r\nexport const createReducers = <Entity extends object>(actions: ITypeAheadActions<Entity>) => {\r\n  const options: Reducer<ApiResponse<Entity>> = (\r\n    state = { results: [], page: 0, total_pages: 0, total_results: 0 },\r\n    action\r\n  ) => {\r\n    if (isType(action, actions.typeResponse)) {\r\n      return { ...state, ...action.payload.value };\r\n    }\r\n    return state;\r\n  };\r\n\r\n  const loading: Reducer<boolean> = (state = false, action) => {\r\n    if (isType(action, actions.typeOccured)) {\r\n      return true;\r\n    }\r\n    if (isType(action, actions.typeResponse)) {\r\n      return false;\r\n    }\r\n    return state;\r\n  };\r\n\r\n  return combineReducers<ITypeAheadState<Entity>>({\r\n    options,\r\n    loading\r\n  });\r\n};\r\n","import {FindService, PopularService} from '../../api';\r\nimport {Epic} from 'redux-observable';\r\nimport {ITypeAheadActions} from './types';\r\nimport {debounce, filter, map, mergeMap, takeUntil} from 'rxjs/operators';\r\nimport {timer} from 'rxjs';\r\n\r\nexport const createEpics = <Entity extends object>(\r\n  actions: ITypeAheadActions<Entity>,\r\n  findService: FindService<Entity>,\r\n  popularService: PopularService<Entity>\r\n): Epic => {\r\n  return (action$) =>\r\n    action$.pipe(\r\n      filter(actions.typeOccured.match),\r\n      debounce(value => timer(value.payload.value === '' ? 0 : 200)),\r\n      mergeMap(typeAction =>\r\n        (!typeAction.payload.value ? popularService() : findService(typeAction.payload.value, 0)).pipe(\r\n          map(responseAction => actions.typeResponse({ value: responseAction })),\r\n          takeUntil(action$.pipe(filter(actions.typeOccured.match)))\r\n        )\r\n      )\r\n    );\r\n};\r\n","import {useCallback, useEffect, useState} from 'react';\r\nimport {optional} from '../../../utils';\r\nimport {useDispatch} from 'redux-react-hook';\r\nimport {useHistoryPush} from '../../../hooks/useHistoryPush';\r\nimport {SelectValue} from 'antd/es/select';\r\nimport {ITypeAheadActions, ToViewPage, UseSearchOptions} from '../types';\r\nimport {UseSetValue, UseValue} from '../../../types/hooks';\r\n\r\nexport const createUseSearchInput = <Entity extends object>(\r\n  actions: ITypeAheadActions<Entity>,\r\n  useSearchValue: UseValue,\r\n  useGoToSearch: UseSetValue,\r\n  useSearchOptions: UseSearchOptions,\r\n  toViewPage: ToViewPage,\r\n  searchParamName: string\r\n) => () => {\r\n  const defaultSearchValue = useSearchValue();\r\n  const [searchValue, setSearchValue] = useState<string | undefined>(undefined);\r\n\r\n  const displayedSearchValue = optional(searchValue, defaultSearchValue);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(actions.typeOccured({ value: defaultSearchValue }));\r\n  }, [defaultSearchValue]);\r\n\r\n  const goToMovieSearch = useGoToSearch();\r\n  const historyPush = useHistoryPush();\r\n\r\n  const dataSource = useSearchOptions(searchValue, defaultSearchValue);\r\n\r\n  const onApply = useCallback(\r\n    (key: SelectValue) => {\r\n      if (key === '_go_to_search') {\r\n        goToMovieSearch(displayedSearchValue);\r\n        setSearchValue(undefined);\r\n      } else {\r\n        historyPush(toViewPage(key.toString()), { [searchParamName]: displayedSearchValue });\r\n      }\r\n    },\r\n    [searchValue]\r\n  );\r\n\r\n  const onSearch = useCallback((key: SelectValue) => {\r\n    dispatch(actions.typeOccured({ value: key.toString() }));\r\n    setSearchValue(key.toString());\r\n  }, []);\r\n  const cancel = useCallback(() => {\r\n    setSearchValue(undefined);\r\n    dispatch(actions.typeOccured({ value: defaultSearchValue }));\r\n  }, [defaultSearchValue]);\r\n  return { dataSource, onSearch, onApply, cancel, value: displayedSearchValue };\r\n};\r\n","import React, {ComponentType, FunctionComponent, memo} from 'react';\r\nimport {Icon} from 'antd';\r\nimport styled from 'styled-components';\r\nimport emptyAvatar from './emptyAvatar.png';\r\n\r\nexport interface SearchOptionProps {\r\n  avatar?: string;\r\n  name: string;\r\n  rank: number;\r\n  year: string;\r\n}\r\n\r\nconst SearchOptionContent: FunctionComponent<SearchOptionProps> = ({ avatar, name, rank, year, ...rest }) => (\r\n  <div {...rest}>\r\n    <img src={avatar || emptyAvatar} className=\"avatar\" alt=\"movie logo\" />\r\n    {name}\r\n    <span className=\"rate\">\r\n      {year}\r\n      <Icon type=\"star\" theme=\"filled\" />\r\n      {rank.toFixed(1)}\r\n    </span>\r\n  </div>\r\n);\r\n\r\nexport default memo(styled(SearchOptionContent)`\r\n  vertical-align: middle;\r\n  line-height: 30px;\r\n  img {\r\n    height: 30px;\r\n    width: 22px;\r\n    margin-right: 10px;\r\n  }\r\n  .rate {\r\n    float: right;\r\n    font-size: 15px;\r\n    svg {\r\n      margin: 0 4px;\r\n      color: #ffcc33;\r\n    }\r\n  }\r\n`) as ComponentType<SearchOptionProps>;\r\n","import {createActions} from './actions';\r\nimport {ActionCreatorFactory} from 'typescript-fsa';\r\nimport {createEpics} from './epics';\r\nimport {GetService} from '../../api';\r\nimport {createReducers} from './reducers';\r\nimport {createUseDetails} from './hooks/useDetails';\r\nimport {SelectDetailsState} from './types';\r\nimport {createDetailsFetcher} from './components/DetailsFetcher';\r\nimport {UseValue} from '../../types/hooks';\r\n\r\nexport const createDetailsAspect = <Entity extends object>(\r\n  actionCreatorFactory: ActionCreatorFactory,\r\n  getService: GetService<Entity>,\r\n  stateSelector: SelectDetailsState<Entity>,\r\n  useDetailsId: UseValue<number>\r\n) => {\r\n  const actions = createActions<Entity>(actionCreatorFactory);\r\n  const epics = createEpics<Entity>(actions, getService);\r\n  const reducers = createReducers<Entity>(actions);\r\n\r\n  const useDetails = createUseDetails(stateSelector);\r\n\r\n  const DetailsFetcher = createDetailsFetcher(actions, useDetailsId);\r\n\r\n  return { actions, epics, reducers, useDetails, DetailsFetcher, useDetailsId };\r\n};\r\n","import {ActionCreatorFactory} from 'typescript-fsa';\r\nimport {IDetailsActions} from './types';\r\n\r\nexport const createActions = <Entity extends object>(\r\n  actionCreatorFactory: ActionCreatorFactory\r\n): IDetailsActions<Entity> => ({\r\n  fetch: actionCreatorFactory('DETAILS_FETCH'),\r\n  fetchComplete: actionCreatorFactory('DETAILS_FETCH_COMPLETE'),\r\n  fetchError: actionCreatorFactory('DETAILS_FETCH_ERROR')\r\n});\r\n","import {GetService} from '../../api';\r\nimport {Epic} from 'redux-observable';\r\nimport {catchError, filter, map, mergeMap, takeUntil} from 'rxjs/operators';\r\nimport {of} from 'rxjs';\r\nimport {IDetailsActions} from './types';\r\n\r\nexport const createEpics = <Entity extends object>(\r\n  actions: IDetailsActions<Entity>,\r\n  getService: GetService<Entity>\r\n): Epic => action$ =>\r\n  action$.pipe(\r\n    filter(actions.fetch.match),\r\n    mergeMap(fetchAction =>\r\n      getService(fetchAction.payload.id).pipe(\r\n        map(response => actions.fetchComplete({ result: response })),\r\n        catchError(err => of(actions.fetchError(err))),\r\n        takeUntil(action$.pipe(filter(actions.fetch.match)))\r\n      )\r\n    )\r\n  );\r\n","import {Reducer} from 'redux';\r\nimport {IDetailsActions, IDetailsState} from './types';\r\n\r\nexport const createReducers = <Entity extends object>(\r\n  actions: IDetailsActions<Entity>\r\n): Reducer<IDetailsState<Entity>> => (state = { loading: false }, action) => {\r\n  if (actions.fetch.match(action)) {\r\n    return { loading: true, error: undefined, result: undefined };\r\n  }\r\n  if (actions.fetchComplete.match(action)) {\r\n    return { loading: false, error: undefined, result: action.payload.result };\r\n  }\r\n  return state;\r\n};\r\n","import {SelectDetailsState} from '../types';\r\nimport {useMappedState} from 'redux-react-hook';\r\n\r\nexport const createUseDetails = <Entity extends object>(stateSelector: SelectDetailsState<Entity>) => () =>\r\n  useMappedState(stateSelector);\r\n","import {useDispatch} from 'redux-react-hook';\r\nimport {FunctionComponent, useEffect} from 'react';\r\nimport {UseValue} from '../../../types/hooks';\r\nimport {IDetailsActions} from '../types';\r\n\r\nexport const createDetailsFetcher = <Entity extends object>(\r\n  actions: IDetailsActions<Entity>,\r\n  useDetailsId: UseValue<number>\r\n): FunctionComponent => () => {\r\n  const detailsId = useDetailsId();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    detailsId && dispatch(actions.fetch({ id: detailsId }));\r\n  }, [detailsId]);\r\n\r\n  return null;\r\n};\r\n","import actionCreatorFactory from 'typescript-fsa';\r\nimport {findMovies, findPopularMovies, getMovie} from './services/movie-search';\r\nimport {selectMovieDetails, selectMovieList, selectMovieTypeAhead} from './state/selectors';\r\nimport {createListAspect} from '../../common/aspects/list';\r\nimport {toMovieListPage, toMovieViewPage, useMovieId} from './routing';\r\nimport {createTypeAheadAspect} from '../../common/aspects/typeahead';\r\nimport {IMovie, IMovieLite} from './types/state';\r\nimport SearchOptionContent from './components/header/SearchOptionContent';\r\nimport React from 'react';\r\nimport {getReleaseYear, getThumbUrl} from '../../common/api';\r\nimport {createDetailsAspect} from '../../common/aspects/details';\r\n\r\nconst factory = actionCreatorFactory('movie-list');\r\n\r\nconst searchParamName = 'mQuery';\r\nexport const listAspect = createListAspect(\r\n  factory,\r\n  findMovies,\r\n  findPopularMovies,\r\n  selectMovieList,\r\n  searchParamName,\r\n  'mYear',\r\n  toMovieListPage()\r\n);\r\n\r\nexport const typeAheadAspect = createTypeAheadAspect<IMovieLite>(\r\n  factory,\r\n  findMovies,\r\n  findPopularMovies,\r\n  result => (\r\n    <SearchOptionContent\r\n      rank={result.vote_average}\r\n      avatar={getThumbUrl(result.poster_path)}\r\n      name={result.title}\r\n      year={getReleaseYear(result.release_date)}\r\n    />\r\n  ),\r\n  'movies',\r\n  selectMovieTypeAhead,\r\n  searchParamName,\r\n  toMovieListPage(),\r\n  toMovieViewPage\r\n);\r\n\r\nexport const detailsAspect = createDetailsAspect<IMovie>(factory, getMovie, selectMovieDetails, useMovieId);\r\n","import React from 'react';\r\nimport SearchPure from '../../../../common/components/antd/Search';\r\nimport {typeAheadAspect} from '../../aspects';\r\n\r\nconst Search = () => {\r\n  const { dataSource, onSearch, cancel, onApply, value } = typeAheadAspect.useSearchInput();\r\n\r\n  return (\r\n    <SearchPure\r\n      onDropdownVisibleChange={opened => !opened && cancel()}\r\n      notFoundContent=\"No movies found\"\r\n      value={value}\r\n      dataSource={dataSource}\r\n      onSearch={onSearch}\r\n      onSelect={onApply}\r\n      searchPrompt=\"Search for movies...\"\r\n    />\r\n  );\r\n};\r\nexport default Search;\r\n","import {detailsAspect, listAspect, typeAheadAspect} from '../aspects';\r\n\r\nexport default [typeAheadAspect.epics, detailsAspect.epics, listAspect.epics];\r\n","import {combineReducers} from 'redux';\r\nimport {IMovieBrowser} from '../types/state';\r\nimport {detailsAspect, listAspect, typeAheadAspect} from '../aspects';\r\n\r\nexport default combineReducers<IMovieBrowser>({\r\n  typeAhead: typeAheadAspect.reducer,\r\n  details: detailsAspect.reducers,\r\n  list: listAspect.reducer\r\n});\r\n","import React, { ComponentType } from 'react';\n\nexport function fixBreadcrumb<T extends React.ComponentType>(component: T): T {\n  (component as any).__ANT_BREADCRUMB_ITEM = true; // fix for 'Breadcrumb only accepts Breadcrumb.Item as it\\'s children' error\n  return component;\n}\n\n/**\n * As we can't use React hooks in Storybook render method, we have a factory function which we pass function component.\n * It will create a render function rendering this component.\n * @param Component\n */\nexport const renderComponent = (Component: ComponentType) => () => (\n  <Component />\n);\n","import { Spin } from 'antd';\nimport React from 'react';\n\nexport const InlineSpinner = () => (\n  <>\n    <Spin size=\"small\" style={{ position: 'absolute', margin: 'auto' }} />\n    <span style={{ width: 14, display: 'inline-block' }} />\n  </>\n);\n","import { BreadcrumbItemProps } from 'antd/es/breadcrumb';\nimport React, { FunctionComponent } from 'react';\nimport { Breadcrumb } from 'antd';\nimport { InlineSpinner } from '../InlineSpinner';\n\ninterface Props extends BreadcrumbItemProps {\n  loading?: boolean;\n}\n\nconst LazyBreadcrumbItem: FunctionComponent<Props> = ({ children, loading, ...rest }) => (\n  <Breadcrumb.Item {...rest}>{loading ? <InlineSpinner /> : children}</Breadcrumb.Item>\n);\n\nexport const BreadcrumbItem = LazyBreadcrumbItem;\n","import {toMovieListPage} from '../../routing';\r\nimport {Icon} from 'antd';\r\nimport {fixBreadcrumb} from '../../../../common/workarounds';\r\nimport React from 'react';\r\nimport {BreadcrumbItem} from '../../../../common/components/antd/BreadcrumbItem';\r\nimport {QueryLink} from '../../../../common/hooks/useHistoryPush';\r\nimport {listAspect} from '../../aspects';\r\n\r\nconst List = () => {\r\n  const searchValue = listAspect.useSearchValue();\r\n\r\n  return (\r\n    <>\r\n      <BreadcrumbItem>\r\n        <QueryLink to={toMovieListPage()} queryParams={{ [listAspect.searchParam]: undefined }}>\r\n          Movies\r\n        </QueryLink>\r\n      </BreadcrumbItem>\r\n      {searchValue && (\r\n        <BreadcrumbItem>\r\n          <QueryLink to={toMovieListPage()}>\r\n            <Icon type=\"search\" style={{ marginRight: 5 }} />\r\n            {searchValue}\r\n          </QueryLink>\r\n        </BreadcrumbItem>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default fixBreadcrumb(List);\r\n","import React from 'react';\nimport {Breadcrumb, Icon} from 'antd';\nimport {Link} from 'react-router-dom';\nimport {toMovieListPage} from '../../../features/movie-browser/routing';\nimport {fixBreadcrumb} from '../../workarounds';\n\nexport const Home= fixBreadcrumb(() => {\n  return (\n    <Breadcrumb.Item>\n      <Link to={toMovieListPage()}>\n        <Icon type=\"home\" />\n      </Link>\n    </Breadcrumb.Item>\n  );\n});\n","import {toMovieViewPage} from '../../routing';\r\nimport {fixBreadcrumb} from '../../../../common/workarounds';\r\nimport React from 'react';\r\nimport {BreadcrumbItem} from '../../../../common/components/antd/BreadcrumbItem';\r\nimport {QueryLink} from '../../../../common/hooks/useHistoryPush';\r\nimport {detailsAspect} from '../../aspects';\r\n\r\nconst List = () => {\r\n  const { loading, result } = detailsAspect.useDetails();\r\n  const movieId = detailsAspect.useDetailsId();\r\n\r\n  return (\r\n    <BreadcrumbItem loading={loading}>\r\n      <QueryLink to={toMovieViewPage((movieId || '').toString())}>{result && result.title}</QueryLink>\r\n    </BreadcrumbItem>\r\n  );\r\n};\r\n\r\nexport default fixBreadcrumb(List);\r\n","export const formItemLayout = {\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 14\n  }\n};\n","import React, {FunctionComponent} from 'react';\r\nimport {ProductionCountries} from '../../features/movie-browser/types/state';\r\nimport {Tag} from 'antd';\r\n\r\nexport const CountryTags: FunctionComponent<{ countries: ProductionCountries | undefined }> = ({ countries }) => (\r\n  <>\r\n    {(countries || []).map(value => (\r\n      <Tag color={'#687cbe'} key={value.name}>\r\n        {value.name}\r\n      </Tag>\r\n    ))}\r\n  </>\r\n);\r\n","import {IMovie} from '../../../types/state';\r\nimport React, {FunctionComponent} from 'react';\r\nimport {withFading} from '../../../../../common/misc';\r\nimport {getPosterUrl} from '../../../../../common/api';\r\nimport {Form, Icon, Rate, Tag, Typography} from 'antd';\r\nimport {FormProps} from 'antd/es/form';\r\nimport {formItemLayout} from '../../../../../common/layout-props';\r\nimport styled from 'styled-components';\r\nimport {CountryTags} from '../../../../../common/components/CountryTags';\r\n\r\nconst { Text } = Typography;\r\n\r\nexport interface MovieViewPureProps extends FormProps {\r\n  entity?: IMovie;\r\n}\r\n\r\nconst MovieViewPure: FunctionComponent<MovieViewPureProps> = ({ entity, ...rest }) => {\r\n  const get = <X extends keyof IMovie>(field: X): IMovie[X] | undefined => entity && entity[field];\r\n\r\n  return (\r\n    <Form {...rest} labelAlign=\"left\" layout=\"horizontal\">\r\n      <Form.Item label=\"Tagline\" {...formItemLayout}>\r\n        {<Typography>{get('tagline')}</Typography> || <em>No tagline specified</em>}\r\n      </Form.Item>\r\n      <Form.Item label=\"Genres\" {...formItemLayout}>\r\n        {(get('genres') || []).map(value => (\r\n          <Tag color={'#49be80'} key={value.id}>\r\n            {value.name}\r\n          </Tag>\r\n        ))}\r\n      </Form.Item>\r\n      <Form.Item label=\"Countries\" {...formItemLayout}>\r\n        <CountryTags countries={get('production_countries')} />\r\n      </Form.Item>\r\n      <Form.Item label=\"Rank\" {...formItemLayout}>\r\n        <Rate allowHalf style={{ marginRight: 3 }} value={get('vote_average')} count={10} disabled />\r\n        <strong>{get('vote_average')}</strong> | {get('vote_count')} votes\r\n      </Form.Item>\r\n      <Form.Item label=\"Popularity\" {...formItemLayout}>\r\n        <Icon type=\"like\" theme=\"filled\" /> {get('popularity')}\r\n      </Form.Item>\r\n      <Form.Item label=\"Release date\" {...formItemLayout}>\r\n        <Text>{get('release_date')}</Text>\r\n      </Form.Item>\r\n      <Form.Item label=\"Description\" {...formItemLayout}>\r\n        <Text>{get('overview')}</Text>\r\n      </Form.Item>\r\n      <Form.Item label=\"Media\" {...formItemLayout}>\r\n        <img src={getPosterUrl(get('poster_path'))} />\r\n        <img src={getPosterUrl(get('backdrop_path'))} />\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default withFading<MovieViewPureProps>(false)(styled(MovieViewPure)`\r\n  .ant-typography {\r\n    margin-top: 10px;\r\n    line-height: 22px;\r\n    display: inline-block;\r\n    text-align: justify;\r\n  }\r\n\r\n  .ant-row {\r\n    margin: 0 0 4px;\r\n  }\r\n\r\n  img {\r\n    margin-top: 10px;\r\n    width: auto;\r\n    height: 100px;\r\n    border-radius: 4px;\r\n    margin-right: 10px;\r\n  }\r\n`);\r\n","import {ContentLayout, DefaultPrimaryContent} from '../../../../../common/components/antd';\r\nimport React from 'react';\r\nimport {Breadcrumb, Button, Tooltip} from 'antd';\r\nimport List from '../../breadcrumbs/List';\r\nimport {Home} from '../../../../../common/components/breadcrumbs/Home';\r\nimport View from '../../breadcrumbs/View';\r\nimport MovieViewPure from './MovieViewPure';\r\nimport {InlineSpinner} from '../../../../../common/components/InlineSpinner';\r\nimport {detailsAspect} from '../../../aspects';\r\nimport {IMovie} from '../../../types/state';\r\n\r\nconst MovieView = () => {\r\n  const { loading, result } = detailsAspect.useDetails();\r\n\r\n  return <MovieViewPure loading={loading} entity={result} />;\r\n};\r\n\r\nconst Toolbar = () => {\r\n  const { result } = detailsAspect.useDetails();\r\n  const { homepage } = result || ({} as Partial<IMovie>);\r\n\r\n  return (\r\n    <>\r\n      {homepage && (\r\n        <Tooltip title=\"View movie homepage\">\r\n          <a href={homepage} target=\"_blank\">\r\n            <Button icon=\"export\" />\r\n          </a>\r\n        </Tooltip>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nconst MovieTitle = () => {\r\n  const { loading, result } = detailsAspect.useDetails();\r\n\r\n  const { title, original_title } = result || ({} as Partial<IMovie>);\r\n\r\n  return loading ? (\r\n    <InlineSpinner />\r\n  ) : (\r\n    <>\r\n      {title}\r\n      {original_title !== title && (\r\n        <small title={'original title'} style={{ float: 'right', fontWeight: 'normal' }}>\r\n          <em>{original_title}</em>\r\n        </small>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default () => (\r\n  <>\r\n    <detailsAspect.DetailsFetcher />\r\n    <ContentLayout\r\n      key=\"layout\"\r\n      primaryContent={\r\n        <DefaultPrimaryContent\r\n          title={<MovieTitle />}\r\n          breadcrumbs={\r\n            <Breadcrumb>\r\n              <Home />\r\n              <List />\r\n              <View />\r\n            </Breadcrumb>\r\n          }\r\n          content={<MovieView />}\r\n          tools={<Toolbar />}\r\n        />\r\n      }\r\n    />\r\n  </>\r\n);\r\n","import _ from 'lodash';\n\nexport default function<D, S>(\n  object: any,\n  path: string,\n  transform: (value: D) => S,\n  defaultValue?: D\n) {\n  const value: D = _.get(object, path, defaultValue) as D;\n  if (value !== undefined) {\n    return transform(value);\n  }\n  return undefined;\n}\n","import React, {ComponentType} from 'react';\nimport {FixedSizeList, FixedSizeListProps, ListChildComponentProps} from 'react-window';\nimport styled from 'styled-components';\nimport {MeasuredComponentProps, withContentRect} from 'react-measure';\nimport _ from 'lodash';\nimport {withStyledScrollbar} from './antd';\nimport getOptional from '../getOptional';\n\nexport interface IVirtualListPropsBase<T> {\n  itemData?: T[];\n  padding?: number;\n  row: ComponentType<ListChildComponentProps>;\n  itemCount?: number;\n  itemSize: number;\n  onItemsRendered?: FixedSizeListProps['onItemsRendered'];\n}\nexport type IVirtualListProps<T> = IVirtualListPropsBase<T> & MeasuredComponentProps;\n\nconst FixedSizeListWithScrollbar = withStyledScrollbar('dark')(FixedSizeList);\n\nexport const VirtualList = <P extends any>(props: IVirtualListProps<P>) => {\n  const {\n    contentRect,\n    onItemsRendered,\n    measureRef,\n    row,\n    itemSize,\n    itemCount,\n    itemData,\n    padding,\n    measure,\n    ...rest\n  } = props;\n\n  return (\n    <div {...rest}>\n      <div className=\"fixed-size-list-container ant-list ant-list-split\" ref={measureRef}>\n        <FixedSizeListWithScrollbar\n          className=\"react-window\"\n          overscanCount={10}\n          height={_.get(contentRect, 'bounds.height', 0)}\n          onItemsRendered={onItemsRendered}\n          itemCount={itemCount === undefined ? 0 : itemCount}\n          itemData={itemData}\n          itemSize={itemSize}\n          width={getOptional(contentRect, 'bounds.width', width => width - padding! / 2, 0) || 0}\n        >\n          {row}\n        </FixedSizeListWithScrollbar>\n      </div>\n    </div>\n  );\n};\n\nconst EnhancedVirtualList = withContentRect('bounds')(styled(VirtualList)`\n  width: 100%; // virtual scroll doesn't have own dimensions, it fills parent 100%\n  height: 100%;\n  background: #ffffff;\n  padding: ${p => `${p.padding!}px 0 ${p.padding!}px ${p.padding!}px`};\n\n  .fixed-size-list-container {\n    width: 100%;\n    height: 100%;\n  }\n\n  .react-window > * > * {\n    width: calc(100% - ${p => p.padding! / 2}px) !important;\n    min-width: 500px;\n  }\n`);\n\nEnhancedVirtualList.defaultProps = {\n  padding: 12,\n  itemSize: 69,\n} as Partial<IVirtualListPropsBase<{}>>;\n\nexport default function getVirtualList<P>() {\n  return (EnhancedVirtualList as unknown) as ComponentType<IVirtualListPropsBase<P>>;\n}\n","import {List} from 'antd';\nimport styled from 'styled-components';\nimport {ComponentType, MouseEvent} from 'react';\nimport {ListItemProps} from 'antd/es/list';\nimport {withQueryLink} from '../../hooks/useHistoryPush';\nimport withLink from '../../withLink';\n\nexport const ListItem = styled(List.Item)`\n  cursor: pointer;\n  &:hover {\n    background: #fcfcfc;\n  }\n`;\n\nexport const ListItemLink = withQueryLink(\n  withLink(ListItem as ComponentType<\n    ListItemProps & { onClick?: (event: MouseEvent<any>) => void | null }\n  >)\n);\n","import React, {ComponentType, MouseEvent} from 'react';\n// @ts-ignore RouterContext not present\nimport {__RouterContext as RouterContext} from 'react-router-dom';\nimport * as H from 'history';\n\nfunction isModifiedEvent<T>(event: MouseEvent<T>) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\nexport interface RequiredProps<T> {\n  onClick?: (event: MouseEvent<T>) => void | null;\n}\n\nexport interface EnhancedProps {\n  to: H.LocationDescriptor;\n  replace?: boolean;\n  innerRef?: (node: HTMLAnchorElement | null) => void;\n  target?: string;\n}\n\nexport default function withLink<T, P extends RequiredProps<T>>(\n  Component: ComponentType<P>\n): ComponentType<P & EnhancedProps> {\n  return class Link extends React.Component<P & EnhancedProps> {\n    // static defaultProps: Partial<EnhancedProps&P> = {\n    //   replace: false\n    // };\n\n    public render() {\n      const { innerRef, replace, to, target, ...rest } = this\n        .props as EnhancedProps;\n\n      return (\n        <RouterContext.Consumer>\n          {(context: RouterContext) => (\n            <Component\n              {...rest as P}\n              onClick={event => this.handleClick(event, context)}\n            />\n          )}\n        </RouterContext.Consumer>\n      );\n    }\n\n    private handleClick(event: MouseEvent<T>, context: RouterContext) {\n      if (this.props.onClick) {\n        this.props.onClick(event);\n      }\n\n      if (\n        !event.defaultPrevented && // onClick prevented default\n        event.button === 0 && // ignore everything but left clicks\n        (!this.props.target || this.props.target === '_self') && // let browser handle \"target=_blank\" etc.\n        !isModifiedEvent(event) // ignore clicks with modifier keys\n      ) {\n        event.preventDefault();\n\n        const method = this.props.replace\n          ? context.history.replace\n          : context.history.push;\n\n        method(this.props.to);\n      }\n    }\n  };\n}\n","import React, {ComponentType, FunctionComponent, ReactNode} from 'react';\nimport styled from 'styled-components';\nimport {Avatar, List} from 'antd';\nimport {ListItemLink} from './ListItem';\nimport {LocationDescriptor} from 'history';\nimport {ListItemProps} from 'antd/es/list';\nimport {Assign} from 'utility-types';\n\nexport type DefaultListItemProps = Assign<\n  ListItemProps,\n  {\n    title?: ReactNode;\n    description?: ReactNode;\n    popularity?: ReactNode;\n    year?: ReactNode;\n    tags?: ReactNode;\n    to: LocationDescriptor;\n    avatar?: string;\n  }\n>;\n\nconst DefaultListItemUnstyled: FunctionComponent<DefaultListItemProps> = ({\n  description,\n  tags,\n  title,\n  to,\n  popularity,\n  year,\n  avatar,\n  ...rest\n}) => (\n  <ListItemLink to={to} {...rest}>\n    <List.Item.Meta avatar={<Avatar src={avatar} size={43} shape=\"square\" />} title={title} description={description} />\n    {(tags || popularity || year) && (\n      <>\n        {tags && <div className=\"default-list-item-content-item\">{tags}</div>}\n        {(popularity || year) && (\n          <div\n            className=\"default-list-item-content-item update-info\"\n            title={`Released in ${year}. Popularity: ${popularity}.`}\n          >\n            <div>{year}</div>\n            <div>{popularity}</div>\n          </div>\n        )}\n      </>\n    )}\n  </ListItemLink>\n);\n\nconst DefaultListItem: ComponentType<DefaultListItemProps> = styled(DefaultListItemUnstyled)`\n  padding-left: 12px;\n  padding-right: 12px;\n  .ant-list-item-content {\n    align-items: center;\n    flex: 0;\n    &:empty {\n      display: none;\n    }\n  }\n  .default-list-item-content-item {\n    white-space: nowrap;\n    margin-left: 40px;\n    color: rgba(0, 0, 0, 0.45);\n    font-size: 14px;\n    display: flex;\n    text-align: right;\n  }\n  .update-info {\n    display: inline-block;\n  }\n\n  .ant-avatar {\n    background: #cccccc;\n  }\n`;\nexport default DefaultListItem;\n","import React from 'react';\nimport {ListChildComponentProps} from 'react-window';\nimport {toMovieViewPage} from '../../../routing';\nimport {Assign} from 'utility-types';\nimport {IMovieLite} from '../../../types/state';\nimport DefaultListItem from '../../../../../common/components/antd/DefaultListItem';\nimport {getPosterUrl, getReleaseYear} from '../../../../../common/api';\nimport {Rate} from 'antd';\nimport {IListItem, IListItems} from '../../../../../common/aspects/list/types';\n\nexport function ListItem(props: Assign<ListChildComponentProps, { data: IListItems<IMovieLite>}>) {\n  const { index, style, data } = props;\n\n  const item = data[index] || ({loading: true } as IListItem<IMovieLite>);\n\n  const result: IMovieLite = item.result || ({ } as IMovieLite);\n  const loading = item.loading;\n\n  return (\n    <DefaultListItem\n      avatar={getPosterUrl(result.poster_path)}\n      style={style}\n      to={toMovieViewPage((result.id && result.id.toString()) || '')}\n      title={\n        <>\n          &#8203;{index + 1}. {result.title}\n        </>\n      }\n      year={loading ? '...' : getReleaseYear(result.release_date)}\n      popularity={loading ? '...' : result.popularity ? result.popularity.toFixed(2) : ''}\n      description={\n        <span>\n          <Rate allowHalf style={{ fontSize: 15, marginRight: 3 }} value={result.vote_average} count={10} disabled />\n          <strong>{result.vote_average}</strong> | {result.vote_count} votes\n        </span>\n      }\n    />\n  );\n}\n","import React from 'react';\r\nimport getVirtualList from '../../../../../common/components/VirtualList';\r\nimport {ListItem} from './ListItem';\r\nimport {IListItem} from '../../../../../common/aspects/list/types';\r\nimport {IMovieLite} from '../../../types/state';\r\nimport {listAspect} from '../../../aspects';\r\n\r\nconst List = getVirtualList<IListItem<IMovieLite> | undefined>();\r\n\r\nexport const MovieList = () => {\r\n  const { items, total, onItemsRendered } = listAspect.usePaginatedList();\r\n\r\n  return <List onItemsRendered={onItemsRendered} itemSize={69} row={ListItem} itemCount={total} itemData={items} />;\r\n};\r\n","import React from 'react';\r\nimport {InlineSpinner} from '../../../../../common/components/InlineSpinner';\r\nimport {listAspect} from '../../../aspects';\r\n\r\nexport const Title = () => {\r\n  const { query, total } = listAspect.useListData();\r\n\r\n  return total === null ? (\r\n    <InlineSpinner />\r\n  ) : (\r\n    <>{query ? `Found ${total} movies matching the criteria` : `Most popular movies`}</>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport {Form, InputNumber} from 'antd';\r\nimport {listAspect} from '../../../aspects';\r\n\r\nexport const YearInput = () => {\r\n  const { value, enabled, onChange } = listAspect.useYearInput();\r\n\r\n  return enabled ? (\r\n    <Form layout=\"inline\">\r\n      <Form.Item label=\"Released\">\r\n        <InputNumber value={value} onChange={onChange} placeholder=\"anytime\" />\r\n      </Form.Item>\r\n    </Form>\r\n  ) : null;\r\n};\r\n","import {YearInput} from './YearInput';\r\nimport React from 'react';\r\n\r\nexport const Toolbar = () => <YearInput />;\r\n","import {IPlugin} from '../../common/plugins';\r\nimport {Route} from 'react-router';\r\nimport {toMovieListPage, toMovieViewPage} from './routing';\r\nimport Search from './components/header/Search';\r\nimport React from 'react';\r\nimport epics from './state/epics';\r\nimport reducers from './state/reducers';\r\n\r\nimport viewPage from './components/pages/view';\r\nimport listPage from './components/pages/list';\r\n\r\nexport default {\r\n  routes: {\r\n    main: (\r\n      <>\r\n        <Route exact path={toMovieListPage()} render={listPage} />\r\n        <Route path={toMovieViewPage()} render={viewPage} />\r\n      </>\r\n    ),\r\n    header: (\r\n      <>\r\n        <Route path={toMovieListPage()}>\r\n          <Search />\r\n        </Route>\r\n      </>\r\n    )\r\n  },\r\n  epics,\r\n  reducers: {\r\n    movieBrowser: reducers\r\n  }\r\n} as IPlugin;\r\n","import {ContentLayout, DefaultPrimaryContent, DefaultSecondaryContent} from '../../../../../common/components/antd';\r\nimport React from 'react';\r\nimport {Breadcrumb} from 'antd';\r\nimport {Home} from '../../../../../common/components/breadcrumbs/Home';\r\nimport List from '../../breadcrumbs/List';\r\nimport {MovieList} from './MovieList';\r\nimport {Title} from './Title';\r\nimport {Toolbar} from './Toolbar';\r\n\r\nexport default () => (\r\n  <>\r\n    <ContentLayout\r\n      key=\"layout\"\r\n      primaryContent={\r\n        <DefaultPrimaryContent\r\n          title={<Title />}\r\n          breadcrumbs={\r\n            <Breadcrumb>\r\n              <Home />\r\n              <List />\r\n            </Breadcrumb>\r\n          }\r\n          tools={<Toolbar />}\r\n        />\r\n      }\r\n      secondaryContent={\r\n        <DefaultSecondaryContent>\r\n          <MovieList />\r\n        </DefaultSecondaryContent>\r\n      }\r\n    />\r\n  </>\r\n);\r\n","import { useRouteParams } from '../../common/misc';\r\nimport { toRootPage } from '../core/routing';\r\n\r\nexport const toPersonListPage = () => `${toRootPage()}/people`;\r\nexport const toPersonViewPage = (id = ':id') => `${toPersonListPage()}/${id}`;\r\n\r\nexport const usePersonId = () => {\r\n  const params = useRouteParams();\r\n  return params.id ? parseInt(params.id) : undefined;\r\n};\r\n\r\nexport const toPersonMovies = (id: string = ':id') => `${toPersonViewPage(id)}/movies`;\r\n","import {ApiResponse, FindService, getApiUrl, GetService, PopularService} from '../../../common/api';\r\nimport {ajax} from 'rxjs/ajax';\r\nimport {map} from 'rxjs/operators';\r\nimport {IPerson, IPersonLite} from '../types/state';\r\n\r\nconst shiftPageNumber = <T extends ApiResponse<any>>(response: T): T => {\r\n  return { ...response, page: response.page - 1 };\r\n};\r\n\r\nexport const findPeople: FindService<IPersonLite> = (query, page = 0, year) =>\r\n  ajax(\r\n    getApiUrl('search/person', {\r\n      page: (page + 1).toString(),\r\n      query\r\n    })\r\n  ).pipe(map(value => shiftPageNumber(value.response)));\r\n\r\nexport const findPopularPeople: PopularService<IPersonLite> = (page = 0) =>\r\n  ajax(\r\n    getApiUrl('person/popular', {\r\n      page: (page + 1).toString()\r\n    })\r\n  ).pipe(map(value => shiftPageNumber(value.response)));\r\n\r\nexport const getPerson: GetService<IPerson> = id =>\r\n  ajax(getApiUrl(`person/${id}`, { append_to_response: ['movie_credits,images'] })).pipe(\r\n    map(value => shiftPageNumber(value.response))\r\n  );\r\n","import {IState} from '../../../common/types/state';\r\nimport {ITypeAheadState} from '../../../common/aspects/typeahead/types';\r\nimport {IPeopleBrowser, IPersonLite} from '../types/state';\r\n\r\nexport const selectPeopleBrowser = (state: IState): IPeopleBrowser => state.peopleBrowser as IPeopleBrowser;\r\n\r\nexport const selectPersonTypeAhead = (state: IState): ITypeAheadState<IPersonLite> => selectPeopleBrowser(state).typeAhead;\r\nexport const selectPersonDetails = (state: IState) => selectPeopleBrowser(state).details;\r\nexport const selectPersonList = (state: IState) => selectPeopleBrowser(state).list;\r\n","import React, {ComponentType, FunctionComponent, memo} from 'react';\r\nimport {Icon} from 'antd';\r\nimport styled from 'styled-components';\r\nimport emptyAvatar from './emptyAvatar.png';\r\n\r\nexport interface SearchOptionProps {\r\n  avatar?: string;\r\n  name: string;\r\n  rank: number;\r\n  year?: string;\r\n}\r\n\r\nconst SearchOptionContent: FunctionComponent<SearchOptionProps> = ({ avatar, name, rank, year, ...rest }) => (\r\n  <div {...rest}>\r\n    <img src={avatar || emptyAvatar} className=\"avatar\" alt=\"person avatar\" />\r\n    {name}\r\n    <span className=\"rate\">\r\n      {year}\r\n      <Icon type=\"like\" theme=\"filled\" />\r\n      {rank.toFixed(1)}\r\n    </span>\r\n  </div>\r\n);\r\n\r\nexport default memo(styled(SearchOptionContent)`\r\n  vertical-align: middle;\r\n  line-height: 30px;\r\n  img {\r\n    height: 30px;\r\n    width: 22px;\r\n    margin-right: 10px;\r\n  }\r\n  .rate {\r\n    float: right;\r\n    font-size: 15px;\r\n    svg {\r\n      margin: 0 4px;\r\n    }\r\n  }\r\n`) as ComponentType<SearchOptionProps>;\r\n","import actionCreatorFactory from 'typescript-fsa';\r\nimport {findPeople, findPopularPeople, getPerson} from './services/people-search';\r\nimport {selectPersonDetails, selectPersonList, selectPersonTypeAhead} from './state/selectors';\r\nimport {createListAspect} from '../../common/aspects/list';\r\nimport {toPersonListPage, toPersonViewPage, usePersonId} from './routing';\r\nimport {createTypeAheadAspect} from '../../common/aspects/typeahead';\r\nimport SearchOptionContent from './components/header/SearchOptionContent';\r\nimport React from 'react';\r\nimport {getThumbUrl} from '../../common/api';\r\nimport {createDetailsAspect} from '../../common/aspects/details';\r\nimport {IPerson, IPersonLite} from './types/state';\r\n\r\nconst factory = actionCreatorFactory('people-list');\r\n\r\nconst searchParamName = 'pQuery';\r\nexport const listAspect = createListAspect(\r\n  factory,\r\n  findPeople,\r\n  findPopularPeople,\r\n  selectPersonList,\r\n  searchParamName,\r\n  'mYear',\r\n  toPersonListPage()\r\n);\r\n\r\nexport const typeAheadAspect = createTypeAheadAspect<IPersonLite>(\r\n  factory,\r\n  findPeople,\r\n  findPopularPeople,\r\n  result => (\r\n    <SearchOptionContent rank={result.popularity} avatar={getThumbUrl(result.profile_path)} name={result.name} />\r\n  ),\r\n  'people',\r\n  selectPersonTypeAhead,\r\n  searchParamName,\r\n  toPersonListPage(),\r\n  toPersonViewPage\r\n);\r\n\r\nexport const detailsAspect = createDetailsAspect<IPerson>(factory, getPerson, selectPersonDetails, usePersonId);\r\n","import React from 'react';\r\nimport SearchPure from '../../../../common/components/antd/Search';\r\nimport {typeAheadAspect} from '../../aspects';\r\n\r\nconst Search = () => {\r\n  const { dataSource, onSearch, cancel, onApply, value } = typeAheadAspect.useSearchInput();\r\n\r\n  return (\r\n    <SearchPure\r\n      onDropdownVisibleChange={opened => !opened && cancel()}\r\n      notFoundContent=\"No people found\"\r\n      value={value}\r\n      dataSource={dataSource}\r\n      onSearch={onSearch}\r\n      onSelect={onApply}\r\n      searchPrompt=\"Search for people...\"\r\n    />\r\n  );\r\n};\r\nexport default Search;\r\n","import {detailsAspect, listAspect, typeAheadAspect} from '../aspects';\r\n\r\nexport default [typeAheadAspect.epics, detailsAspect.epics, listAspect.epics];\r\n","import {combineReducers} from 'redux';\r\nimport {detailsAspect, listAspect, typeAheadAspect} from '../aspects';\r\nimport {IPeopleBrowser} from '../types/state';\r\n\r\nexport default combineReducers<IPeopleBrowser>({\r\n  typeAhead: typeAheadAspect.reducer,\r\n  details: detailsAspect.reducers,\r\n  list: listAspect.reducer\r\n});\r\n","import {toPersonListPage} from '../../routing';\r\nimport {Icon} from 'antd';\r\nimport {fixBreadcrumb} from '../../../../common/workarounds';\r\nimport React from 'react';\r\nimport {BreadcrumbItem} from '../../../../common/components/antd/BreadcrumbItem';\r\nimport {QueryLink} from '../../../../common/hooks/useHistoryPush';\r\nimport {listAspect} from '../../aspects';\r\n\r\nconst List = () => {\r\n  const searchValue = listAspect.useSearchValue();\r\n\r\n  return (\r\n    <>\r\n      <BreadcrumbItem>\r\n        <QueryLink to={toPersonListPage()} queryParams={{ [listAspect.searchParam]: undefined }}>\r\n          People\r\n        </QueryLink>\r\n      </BreadcrumbItem>\r\n      {searchValue && (\r\n        <BreadcrumbItem>\r\n          <QueryLink to={toPersonListPage()}>\r\n            <Icon type=\"search\" style={{ marginRight: 5 }} />\r\n            {searchValue}\r\n          </QueryLink>\r\n        </BreadcrumbItem>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default fixBreadcrumb(List);\r\n","import {toPersonViewPage} from '../../routing';\r\nimport {fixBreadcrumb} from '../../../../common/workarounds';\r\nimport React from 'react';\r\nimport {BreadcrumbItem} from '../../../../common/components/antd/BreadcrumbItem';\r\nimport {QueryLink} from '../../../../common/hooks/useHistoryPush';\r\nimport {detailsAspect} from '../../aspects';\r\n\r\nconst List = () => {\r\n  const { loading, result } = detailsAspect.useDetails();\r\n  const personId = detailsAspect.useDetailsId();\r\n\r\n  return (\r\n    <BreadcrumbItem loading={loading}>\r\n      <QueryLink to={toPersonViewPage((personId || '').toString())}>{result && result.name}</QueryLink>\r\n    </BreadcrumbItem>\r\n  );\r\n};\r\n\r\nexport default fixBreadcrumb(List);\r\n","import {IPerson} from '../../../types/state';\r\nimport React, {FunctionComponent} from 'react';\r\nimport {withFading} from '../../../../../common/misc';\r\nimport {getPosterUrl} from '../../../../../common/api';\r\nimport {Form, Icon, Typography} from 'antd';\r\nimport {FormProps} from 'antd/es/form';\r\nimport {formItemLayout} from '../../../../../common/layout-props';\r\nimport styled from 'styled-components';\r\n\r\nconst { Text } = Typography;\r\n\r\nexport interface PersonViewPureProps extends FormProps {\r\n  entity?: IPerson;\r\n}\r\n\r\nconst PersonViewPure: FunctionComponent<PersonViewPureProps> = ({ entity, ...rest }) => {\r\n  const get = <X extends keyof IPerson>(field: X): IPerson[X] | undefined => entity && entity[field];\r\n\r\n  return (\r\n    <Form {...rest} labelAlign=\"left\" layout=\"horizontal\">\r\n      <Form.Item label=\"Popularity\" {...formItemLayout}>\r\n        <Icon type=\"like\" theme=\"filled\" /> {get('popularity')}\r\n      </Form.Item>\r\n      <Form.Item label=\"Birth\" {...formItemLayout}>\r\n        <Text>\r\n          {get('birthday')} in {get('place_of_birth')}\r\n        </Text>\r\n      </Form.Item>\r\n      {get('deathday') && (\r\n        <Form.Item label=\"Death\" {...formItemLayout}>\r\n          <Text>{get('deathday')}</Text>\r\n        </Form.Item>\r\n      )}\r\n      {get('profile_path') && (\r\n        <Form.Item label=\"Media\" {...formItemLayout}>\r\n          <img src={getPosterUrl(get('profile_path'))} />\r\n        </Form.Item>\r\n      )}\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default withFading<PersonViewPureProps>(false)(styled(PersonViewPure)`\r\n  .ant-row {\r\n    margin: 0 0 4px;\r\n  }\r\n\r\n  img {\r\n    margin-top: 10px;\r\n    width: auto;\r\n    height: 100px;\r\n    border-radius: 4px;\r\n    margin-right: 10px;\r\n  }\r\n`);\r\n","import {detailsAspect} from '../../../aspects';\r\nimport React from 'react';\r\nimport {Card} from 'antd';\r\nimport {InlineSpinner} from '../../../../../common/components/InlineSpinner';\r\n\r\nexport const Bio = () => {\r\n  const { result, loading } = detailsAspect.useDetails();\r\n\r\n  return loading || !result ? (\r\n    <InlineSpinner />\r\n  ) : result!.biography ? (\r\n    <Card>{result!.biography}</Card>\r\n  ) : (\r\n    <>Biography not found</>\r\n  );\r\n};\r\n","import {detailsAspect} from '../../../aspects';\r\nimport {Avatar, Card, Icon, List} from 'antd';\r\nimport React, {HTMLProps} from 'react';\r\nimport {ICast, ICrew} from '../../../types/state';\r\nimport {getPosterUrl, getThumbUrl} from '../../../../../common/api';\r\nimport {QueryLink} from '../../../../../common/hooks/useHistoryPush';\r\nimport {toMovieViewPage} from '../../../../movie-browser/routing';\r\nimport _ from 'lodash';\r\nimport {InlineSpinner} from '../../../../../common/components/InlineSpinner';\r\n\r\ninterface IconTextProps extends HTMLProps<HTMLDivElement> {\r\n  type: string;\r\n  text: string;\r\n}\r\n\r\nconst IconText = ({ type, text, ...rest }: IconTextProps) => (\r\n  <span {...rest}>\r\n    <Icon type={type} style={{ marginRight: 8 }} />\r\n    {text}\r\n  </span>\r\n);\r\nexport const Movies = () => {\r\n  const { result, loading } = detailsAspect.useDetails();\r\n\r\n  const movies = result ? [...result.movie_credits.cast, ...result.movie_credits.crew] : [];\r\n\r\n  return loading ? (\r\n    <InlineSpinner />\r\n  ) : (\r\n    <Card>\r\n      <List\r\n        itemLayout=\"vertical\"\r\n        dataSource={movies}\r\n        renderItem={(cast: ICast & ICrew) => (\r\n          <List.Item\r\n            key={cast.id.toString()}\r\n            actions={[\r\n              <IconText type=\"like-o\" title=\"Popularity\" text={cast.popularity.toFixed(2)} />,\r\n              <IconText type=\"star-o\" title=\"Rank\" text={cast.vote_average.toFixed(2)} />,\r\n              <IconText type=\"clock-circle\" title=\"Release date\" text={cast.release_date} />\r\n            ]}\r\n            extra={<img height={153} alt=\"logo\" src={getPosterUrl(cast.poster_path)} />}\r\n          >\r\n            <List.Item.Meta\r\n              avatar={<Avatar shape=\"square\" src={getThumbUrl(cast.backdrop_path)} />}\r\n              title={<QueryLink to={toMovieViewPage(cast.id.toString())}>{cast.title}</QueryLink>}\r\n              description={<>{_.compact([cast.department, cast.job]).join(', ')}</>}\r\n            />\r\n            {cast.overview}\r\n          </List.Item>\r\n        )}\r\n      />\r\n    </Card>\r\n  );\r\n};\r\n","import {ContentLayout, DefaultPrimaryContent, DefaultSecondaryContent} from '../../../../../common/components/antd';\r\nimport React, {useMemo} from 'react';\r\nimport {Breadcrumb, Button, Tooltip, Typography} from 'antd';\r\nimport List from '../../breadcrumbs/List';\r\nimport {Home} from '../../../../../common/components/breadcrumbs/Home';\r\nimport View from '../../breadcrumbs/View';\r\nimport MovieViewPure from './PersonViewPure';\r\nimport {InlineSpinner} from '../../../../../common/components/InlineSpinner';\r\nimport {detailsAspect} from '../../../aspects';\r\nimport {IPerson} from '../../../types/state';\r\nimport {Bio} from './Bio';\r\nimport {RoutedTabs} from '../../../../../common/components/antd/AppTabs';\r\nimport {toPersonMovies, toPersonViewPage, usePersonId} from '../../../routing';\r\nimport {IMenuItem} from '../../../../../common/misc';\r\nimport {useHistoryPush} from '../../../../../common/hooks/useHistoryPush';\r\nimport {Route, Switch} from 'react-router';\r\nimport {Movies} from './Movies';\r\n\r\nconst MovieView = () => {\r\n  const { loading, result } = detailsAspect.useDetails();\r\n\r\n  return <MovieViewPure loading={loading} entity={result} />;\r\n};\r\n\r\nconst Toolbar = () => {\r\n  const { result } = detailsAspect.useDetails();\r\n  const { homepage } = result || ({} as Partial<IPerson>);\r\n\r\n  return (\r\n    <>\r\n      {homepage && (\r\n        <Tooltip title=\"View person homepage\">\r\n          <a href={homepage} target=\"_blank\">\r\n            <Button icon=\"export\" />\r\n          </a>\r\n        </Tooltip>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nconst MovieTitle = () => {\r\n  const { loading, result } = detailsAspect.useDetails();\r\n\r\n  const { name, also_known_as, known_for_department } = result || ({} as Partial<IPerson>);\r\n\r\n  return loading ? (\r\n    <InlineSpinner />\r\n  ) : (\r\n    <>\r\n      {name}{' '}\r\n      <small>\r\n        <em>\r\n          <Typography.Text type=\"secondary\">({known_for_department})</Typography.Text>\r\n        </em>\r\n      </small>\r\n    </>\r\n  );\r\n};\r\n\r\nconst ConnectedTabs = () => {\r\n  const personId = String(usePersonId());\r\n  const historyPush = useHistoryPush();\r\n  const menuConfiguration = useMemo(\r\n    () =>\r\n      [\r\n        {\r\n          path: toPersonViewPage(personId),\r\n          label: 'Bio',\r\n          link: toPersonViewPage(personId),\r\n          icon: 'user',\r\n          exact: true\r\n        },\r\n        {\r\n          path: toPersonMovies(personId),\r\n          label: 'Movies',\r\n          link: toPersonMovies(personId),\r\n          icon: 'caret-right'\r\n        }\r\n      ] as IMenuItem[],\r\n    [personId]\r\n  );\r\n  return <RoutedTabs menuConfiguration={menuConfiguration} onMenuSelect={historyPush} />;\r\n};\r\n\r\nconst TabContent = () => {\r\n  const personId = String(usePersonId());\r\n\r\n  return (\r\n    <Switch>\r\n      <Route path={toPersonViewPage(personId)} exact component={Bio} />\r\n      <Route path={toPersonMovies(personId)} exact component={Movies} />\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default () => (\r\n  <>\r\n    <detailsAspect.DetailsFetcher />\r\n    <ContentLayout\r\n      key=\"layout\"\r\n      primaryContent={\r\n        <DefaultPrimaryContent\r\n          title={<MovieTitle />}\r\n          breadcrumbs={\r\n            <Breadcrumb>\r\n              <Home />\r\n              <List />\r\n              <View />\r\n            </Breadcrumb>\r\n          }\r\n          content={<MovieView />}\r\n          tools={<Toolbar />}\r\n          tabs={<ConnectedTabs />}\r\n        />\r\n      }\r\n      secondaryContent={\r\n        <DefaultSecondaryContent>\r\n          <TabContent />\r\n        </DefaultSecondaryContent>\r\n      }\r\n    />\r\n  </>\r\n);\r\n","import React from 'react';\nimport {ListChildComponentProps} from 'react-window';\nimport {toPersonViewPage} from '../../../routing';\nimport {Assign} from 'utility-types';\nimport DefaultListItem from '../../../../../common/components/antd/DefaultListItem';\nimport {getPosterUrl} from '../../../../../common/api';\nimport {IListItem, IListItems} from '../../../../../common/aspects/list/types';\nimport {IPersonLite} from '../../../types/state';\n\nexport function ListItem(props: Assign<ListChildComponentProps, { data: IListItems<IPersonLite> }>) {\n  const { index, style, data } = props;\n\n  const item = data[index] || ({ loading: true } as IListItem<IPersonLite>);\n\n  const result: IPersonLite = item.result || ({} as IPersonLite);\n  const loading = item.loading;\n\n  return (\n    <DefaultListItem\n      avatar={getPosterUrl(result.profile_path)}\n      style={style}\n      to={toPersonViewPage((result.id && result.id.toString()) || '')}\n      title={\n        <>\n          &#8203;{index + 1}. {result.name}\n        </>\n      }\n      popularity={loading ? '...' : result.popularity ? result.popularity.toFixed(2) : ''}\n    />\n  );\n}\n","import React from 'react';\r\nimport getVirtualList from '../../../../../common/components/VirtualList';\r\nimport {ListItem} from './ListItem';\r\nimport {IListItem} from '../../../../../common/aspects/list/types';\r\nimport {listAspect} from '../../../aspects';\r\nimport {IPersonLite} from '../../../types/state';\r\n\r\nconst List = getVirtualList<IListItem<IPersonLite> | undefined>();\r\n\r\nexport const PersonList = () => {\r\n  const { items, total, onItemsRendered } = listAspect.usePaginatedList();\r\n\r\n  return <List onItemsRendered={onItemsRendered} itemSize={69} row={ListItem} itemCount={total} itemData={items} />;\r\n};\r\n","import React from 'react';\r\nimport {InlineSpinner} from '../../../../../common/components/InlineSpinner';\r\nimport {listAspect} from '../../../aspects';\r\n\r\nexport const Title = () => {\r\n  const { query, total } = listAspect.useListData();\r\n\r\n  return total === null ? (\r\n    <InlineSpinner />\r\n  ) : (\r\n    <>{query ? `Found ${total} people matching the criteria` : `Most popular people`}</>\r\n  );\r\n};\r\n","import {IPlugin} from '../../common/plugins';\r\nimport {Route} from 'react-router';\r\nimport {toPersonListPage, toPersonViewPage} from './routing';\r\nimport Search from './components/header/Search';\r\nimport React from 'react';\r\nimport epics from './state/epics';\r\nimport reducers from './state/reducers';\r\n\r\nimport viewPage from './components/pages/view';\r\nimport listPage from './components/pages/list';\r\n\r\nexport default {\r\n  routes: {\r\n    main: (\r\n      <>\r\n        <Route exact path={toPersonListPage()} render={listPage} />\r\n        <Route path={toPersonViewPage()} render={viewPage} />\r\n      </>\r\n    ),\r\n    header: (\r\n      <>\r\n        <Route path={toPersonListPage()}>\r\n          <Search />\r\n        </Route>\r\n      </>\r\n    )\r\n  },\r\n  epics,\r\n  reducers: {\r\n    peopleBrowser: reducers\r\n  }\r\n} as IPlugin;\r\n","import {ContentLayout, DefaultPrimaryContent, DefaultSecondaryContent} from '../../../../../common/components/antd';\r\nimport React from 'react';\r\nimport {Breadcrumb} from 'antd';\r\nimport {Home} from '../../../../../common/components/breadcrumbs/Home';\r\nimport List from '../../breadcrumbs/List';\r\nimport {PersonList} from './PersonList';\r\nimport {Title} from './Title';\r\n\r\nexport default () => (\r\n  <>\r\n    <ContentLayout\r\n      key=\"layout\"\r\n      primaryContent={\r\n        <DefaultPrimaryContent\r\n          title={<Title />}\r\n          breadcrumbs={\r\n            <Breadcrumb>\r\n              <Home />\r\n              <List />\r\n            </Breadcrumb>\r\n          }\r\n        />\r\n      }\r\n      secondaryContent={\r\n        <DefaultSecondaryContent>\r\n          <PersonList />\r\n        </DefaultSecondaryContent>\r\n      }\r\n    />\r\n  </>\r\n);\r\n","import {IPlugin} from '../common/plugins';\r\nimport movieBrowser from './movie-browser';\r\nimport peopleBrowser from './people-browser';\r\nimport core from './core';\r\n\r\nconst features: IPlugin[] = [core, movieBrowser, peopleBrowser];\r\nexport default features;\r\n","import {IPlugin} from '../../common/plugins';\r\nimport {Redirect, Route} from 'react-router';\r\nimport {toRootPage} from './routing';\r\nimport React from 'react';\r\nimport {toMovieListPage} from '../movie-browser/routing';\r\n\r\nexport default {\r\n  routes: {\r\n    main: (\r\n      <>\r\n        <Route exact path={toRootPage()} render={() => <Redirect to={toMovieListPage()} />} />\r\n      </>\r\n    )\r\n  }\r\n} as IPlugin;\r\n","import React, {cloneElement} from 'react';\nimport Switch from './common/components/FlatteningSwitch';\nimport {App as AntApp, AppMenu, AppSider, DefaultAppLogo} from './common/components/antd';\nimport {IMenuItem} from './common/misc';\nimport DefaultAppHeader from './common/components/antd/DefaultAppHeader';\nimport logo from './common/components/antd/__stories__/AppSider.logo.png';\nimport {toMovieListPage} from './features/movie-browser/routing';\n\nimport _ from 'lodash';\nimport features from './features';\nimport {toPersonListPage} from './features/people-browser/routing';\n\nconst menuConfiguration = [\n  {\n    link: toMovieListPage(),\n    path: toMovieListPage(),\n    label: 'Movies',\n    icon: 'play-circle'\n  },\n  {\n    link: toPersonListPage(),\n    path: toPersonListPage(),\n    label: 'People',\n    icon: 'user'\n  }\n] as IMenuItem[];\nconst App = () => (\n  <AntApp\n    sider={\n      <AppSider content={<AppMenu menuConfiguration={menuConfiguration} />} logo={<DefaultAppLogo logo={logo} />} />\n    }\n    header={\n      <DefaultAppHeader>\n        <Switch>\n          {_.compact(features.map(plugin => _.get(plugin, 'routes.header'))).map((routes, index) =>\n            cloneElement(routes, { key: index })\n          )}\n        </Switch>\n      </DefaultAppHeader>\n    }\n    content={\n      <Switch>\n        {_.compact(features.map(plugin => _.get(plugin, 'routes.main'))).map((routes, index) =>\n          cloneElement(routes, { key: index })\n        )}\n      </Switch>\n    }\n  />\n);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React, { FunctionComponent } from 'react';\r\nimport { Store } from 'redux';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { StoreContext } from 'redux-react-hook';\r\nimport { ThemeProvider } from 'styled-components';\r\nimport baseTheme from './common/components/antd/app-theme';\r\n\r\ninterface RootProps {\r\n  store: Store;\r\n}\r\n\r\nconst Root: FunctionComponent<RootProps> = ({ store, children }) => (\r\n  <BrowserRouter basename=\"/imdb-hooks\">\r\n    <ThemeProvider theme={baseTheme}>\r\n      <StoreContext.Provider value={store}>{children}</StoreContext.Provider>\r\n    </ThemeProvider>\r\n  </BrowserRouter>\r\n);\r\n\r\nexport default Root;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.min.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport createStore from './store';\nimport Root from './Root';\n\nconst store = createStore({});\n\nReactDOM.render(\n  <Root store={store}>\n    <App />\n  </Root>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import {\n  applyMiddleware,\n  combineReducers,\n  compose,\n  createStore,\n  Middleware,\n  Reducer,\n  StoreEnhancer\n} from 'redux';\nimport _ from 'lodash';\nimport { IState } from './common/types/state';\nimport { combineEpics, createEpicMiddleware } from 'redux-observable';\nimport features from './features';\nimport { IPlugin } from './common/plugins';\n\nexport const rootReducerFactory = (pluginArray: IPlugin[]): Reducer<IState> => {\n  const pluginReducers = pluginArray\n    .map(p => p.reducers)\n    .reduce(\n      (finalReducers, reducers) => ({ ...finalReducers, ...reducers }),\n      {}\n    ) as { [p: string]: Reducer };\n\n  return combineReducers(pluginReducers);\n};\n\nexport default (preloadedState: IState) => {\n  const epicMiddleware = createEpicMiddleware();\n\n  const middlewares: Middleware[] = [epicMiddleware];\n\n  const enhancers: StoreEnhancer[] = [applyMiddleware(...middlewares)];\n\n  const composeEnhancers =\n    (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n  const store = createStore(\n    rootReducerFactory(features),\n    preloadedState,\n    composeEnhancers(...enhancers)\n  );\n\n  const epics = _.flatten(_.compact(features.map(p => p.epics)));\n  epicMiddleware.run(combineEpics(...epics));\n\n  return store;\n};\n"],"sourceRoot":""}